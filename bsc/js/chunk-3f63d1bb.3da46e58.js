(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f63d1bb"],{"0830":function(t,e,n){t.exports=n.p+"img/top0.13b76951.svg"},"4b5f":function(t,e,n){},5360:function(t,e,n){t.exports=n.p+"img/top2.e19b6a72.svg"},"5d16":function(t,e,n){t.exports=n.p+"img/top3.cce3965a.svg"},"77db":function(t,e,n){t.exports=n.p+"img/digits.2818e1c4.png"},"84f4":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"dao-top10 "+t.theme},[s("div",{staticClass:"header"},[t._m(0),t._m(1),s("van-button",{attrs:{loading:t.trading,disabled:!t.binded||t.trading||!t.canLottery},on:{click:t.lottery}},[t._v(t._s(t.trading?"开奖中":"开奖"))])],1),s("div",{staticClass:"top10-list"},[s("span",[t._v("今日TOP10排名")]),s("div",{staticClass:"list"},[t._l(t.top10,(function(e,r){return s("div",{key:e.address,class:"top"+r},[s("div",[r<3?s("img",{attrs:{src:n("8e6c")("./top"+r+".svg")}}):s("div",{staticClass:"digit"},[s("img",{attrs:{src:n("5d16")}}),s("span",{domProps:{textContent:t._s(r+1)}})]),s("span",{domProps:{textContent:t._s(e.address)}})]),s("span",{domProps:{textContent:t._s(e.amount)}})])})),s("div",{directives:[{name:"show",rawName:"v-show",value:t.binded&&t.connect,expression:"binded && connect"}]},[s("div",[t._m(2),s("span",[t._v(t._s(t.selfAddress))])]),s("span",[t._v(t._s(t.selfAmount))])])],2)])])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("span",[t._v("TOP10激励奖")]),n("span",[t._v("日参与FSV的10%用于激励直接贡献排名前10玩家")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"countdown"},[n("div",{staticClass:"digits"},[n("div",{staticClass:"cntDigit",attrs:{id:"cnt_0"}}),n("div",{staticClass:"cntDigit",attrs:{id:"cnt_1"}}),n("span",{staticClass:"cntSeparator"},[t._v(":")]),n("div",{staticClass:"cntDigit",attrs:{id:"cnt_2"}}),n("div",{staticClass:"cntDigit",attrs:{id:"cnt_3"}}),n("span",{staticClass:"cntSeparator"},[t._v(":")]),n("div",{staticClass:"cntDigit",attrs:{id:"cnt_4"}}),n("div",{staticClass:"cntDigit",attrs:{id:"cnt_5"}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("img",{attrs:{src:n("9268")}})])}],i=n("3835"),a=n("1da1"),o=n("5530"),c=(n("96cf"),n("fb6a"),n("99af"),n("e25e"),n("4795"),n("4de4"),{data:function(){return{canLottery:!1,top10:[],selfAddress:"",selfAmount:"0",trading:!1}},computed:Object(o["a"])({},Vuex.mapState(["theme","binded"])),created:function(){this.$contracts&&this.init()},methods:{init:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.selfAddress="0x...".concat(t.$address.slice(-4)),e.next=3,t.$web3.eth.getBlock("latest");case 3:n=e.sent.timestamp,t.$contracts.Multicall.methods.aggregate([[t.$contracts.TopReward.options.address,t.$contracts.TopReward.methods.lastLotteryDay().encodeABI()],[t.$contracts.TopReward.options.address,t.$contracts.TopReward.methods.toDayTopUsers().encodeABI()],[t.$contracts.TopReward.options.address,t.$contracts.TopReward.methods.toDayTopResults().encodeABI()],[t.$contracts.ForceFactory.options.address,t.$contracts.ForceFactory.methods.intervalDayByTime(n).encodeABI()]]).call({from:t.$address},(function(e,s){if(!e){var r=Object(i["a"])(s.returnData,4),a=r[0],o=r[1],c=r[2],d=r[3],u=o.decode(["address[10]"]),l=c.decode(["uint256[10]"]),f=[];t.initCountdown(a.toBN().minus(n).toNumber());for(var p=0;p<u.length;p++)u[p].toBN().lte(0)||f.push({address:"0x...".concat(u[p].slice(-4)),amount:l[p].fromWei()});t.top10=f,t.$contracts.TopReward.methods.dayUserResults(d,t.$address).call({from:t.$address},(function(e,n){e||(t.selfAmount=n.fromWei())}))}}));case 5:case"end":return e.stop()}}),e)})))()},lottery:function(){var t=this;this.$contracts.TopReward.methods.lottery().send({from:this.$address}).on("transactionHash",(function(e){t.trading=!0})).on("receipt",(function(e){vant.Toast.success("开奖成功！"),t.$emit("reload"),t.init(),t.trading=!1})).on("error",(function(e){t.trading=!1}))},initCountdown:function(t){if(t<=0)return this.countdown("00:00:00"),void(this.canLottery=!0);var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),s=t-3600*e-60*n;function r(t){return t<10?"0".concat(t):t}this.countdown("".concat(r(e),":").concat(r(n),":").concat(r(s)))},countdown:function(t){var e=this,s=document.querySelector(".cntDigit"),r={startTime:t,stepTime:60,format:"hh:mm:ss",digitImages:6,digitWidth:s.offsetWidth,digitHeight:s.offsetHeight,timerEnd:function(){},image:n("77db")},i=[],a=[],o=function(){for(var t,e=0,n=0;n<r.startTime.length;n++)if(parseInt(r.startTime[n])>=0){switch(t=document.querySelector("#cnt_".concat(e)),t.current=parseInt(r.startTime[n]),i.push(t),c(e,-t.current*r.digitHeight*r.digitImages),r.format[n]){case"h":i[e]._max=function(t,e){return t%2==0?2:e?3:9};break;case"m":case"s":i[e]._max=function(t){return t%2==0?5:9}}++e}},c=function(t,e){return void 0!==e?(i[t].margin=e,i[t].style.backgroundPosition="0 ".concat(e,"px")):i[t].margin||0},d=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a[t]&&window.clearInterval(a[t]);var s=-r.digitHeight*r.digitImages*i[t].current;c(t,s),i[t].current=i[t].current+(n?e:-e);var o=0;a[t]=setInterval((function(){if(o++===r.digitImages*e)return window.clearInterval(a[t]),void delete a[t];var i=n?-r.digitHeight:r.digitHeight;c(t,s+o*i)}),r.stepTime/e)},u=function t(e){if(0!=i[e].current)d(e,1);else if(e>0){var n=0==i[e-1].current;d(e,i[e]._max(e,n),!0),t(e-1)}else{for(var s=0;s<i.length;s++)clearInterval(a[s]),c(s,0);r.timerEnd()}};o();var l=setInterval((function(){i.filter((function(t){return t.current>0})).length<=0?(e.canLottery=!0,clearInterval(l)):u(i.length-1)}),1e3)}}}),d=c,u=d,l=(n("e5e1"),n("2877")),f=Object(l["a"])(u,s,r,!1,null,"c02ac3b0",null);e["default"]=f.exports},"8e6c":function(t,e,n){var s={"./top-pool.svg":"ecd8","./top0.svg":"0830","./top1.svg":"e31e","./top2.svg":"5360","./top3.svg":"5d16"};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}r.keys=function(){return Object.keys(s)},r.resolve=i,t.exports=r,r.id="8e6c"},9268:function(t,e,n){t.exports=n.p+"img/user.fe566d18.svg"},c20d:function(t,e,n){var s=n("da84"),r=n("58a8").trim,i=n("5899"),a=s.parseInt,o=/^[+-]?0[Xx]/,c=8!==a(i+"08")||22!==a(i+"0x16");t.exports=c?function(t,e){var n=r(String(t));return a(n,e>>>0||(o.test(n)?16:10))}:a},e25e:function(t,e,n){var s=n("23e7"),r=n("c20d");s({global:!0,forced:parseInt!=r},{parseInt:r})},e31e:function(t,e,n){t.exports=n.p+"img/top1.13783bf9.svg"},e5e1:function(t,e,n){"use strict";n("4b5f")}}]);