(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e66674a"],{"0499":function(t,e,n){t.exports=n.p+"img/fsv.07dace5d.svg"},"0d03":function(t,e,n){var r=n("6eeb"),s=Date.prototype,o="Invalid Date",a="toString",i=s[a],c=s.getTime;new Date(NaN)+""!=o&&r(s,a,(function(){var t=c.call(this);return t===t?i.call(this):o}))},2532:function(t,e,n){"use strict";var r=n("23e7"),s=n("5a34"),o=n("1d80"),a=n("ab13");r({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~String(o(this)).indexOf(s(t),arguments.length>1?arguments[1]:void 0)}})},"2d09":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:"dao-governance "+t.theme},[r("div",{staticClass:"container"},[t._m(0),r("div",{staticClass:"powers"},[r("div",[r("span",[t._v("销毁算力：")]),r("span",[t._v(t._s(t.burnForce.toFixed(4)))])]),r("div",[r("span",[t._v("邀请算力：")]),r("span",[t._v(t._s(t.shareForce.toFixed(4)))])]),r("div",[r("span",[t._v("未生效算力：")]),r("span",[t._v(t._s(t.invalidForce.toFixed(4)))])])]),r("div",{staticClass:"input-container"},[r("div",{staticClass:"token-info"},[t._m(1),r("span",[t._v("余额 "),r("span",[t._v(t._s(t.fsvBalance.toFixed(2)))])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.fsvAmount,expression:"fsvAmount"}],attrs:{type:"number",placeholder:"0"},domProps:{value:t.fsvAmount},on:{input:[function(e){e.target.composing||(t.fsvAmount=e.target.value)},t.input]}})]),r("img",{attrs:{src:n("c2fd")}}),r("div",{staticClass:"token-info"},[t._m(2),r("span",[t._v("余额 "),r("span",[t._v(t._s(t.acBalance.toFixed(2)))])]),r("input",{attrs:{type:"number",placeholder:"0",readonly:""},domProps:{value:t.acAmount.toFixed(4)}})])]),r("span",[t._v("～"+t._s(t.sumUSD.toFixed(4))+" USD")]),r("span",[t._v("获得算力 "),r("span",[t._v(t._s(t.burnGetForce.toFixed(4)))])]),r("van-button",{attrs:{loading:t.trading,disabled:t.binded&&(t.trading||Number(t.fsvAmount)<=0)},on:{click:t.invest}},[t._v(t._s(t.btnText))])],1)])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("span",[t._v("DAO治理获得算力")]),n("span",[t._v("通过治理参与享受更多DAO专属福利")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("img",{attrs:{src:n("0499")}}),r("span",[t._v("FSV")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("img",{attrs:{src:n("c776")}}),r("span",[t._v("AC")])])}],o=n("1da1"),a=n("3835"),i=n("5530"),c=(n("96cf"),n("a9e3"),n("b680"),n("4795"),n("aca7")),d={data:function(){return{burnForce:"0",shareForce:"0",invalidForce:"0",acBalance:"0",fsvBalance:"0",acAllowance:"0",fsvAllowance:"0",acAmount:"",fsvAmount:"",sumUSD:"0",burnGetForce:"0",inputing:!1,trading:!1}},computed:Object(i["a"])(Object(i["a"])({},Vuex.mapState(["theme"])),{},{btnText:function(){return this.binded?this.trading?"区块确认中":Number(this.fsvAmount)<=0?"输入数量":this.fsvAmount.toBN().gt(this.fsvAllowance)?"授权FSV":this.acAmount.toBN().gt(this.acAllowance)?"授权AC":"确认":"去绑定"}}),created:function(){this.$contracts&&this.init()},methods:{init:function(){var t=this;this.$contracts.Multicall.methods.aggregate([[this.$contracts.Govern.options.address,this.$contracts.Govern.methods.userForceOfBurn(this.$address).encodeABI()],[this.$contracts.ForceToken.options.address,this.$contracts.ForceToken.methods.balanceOf(this.$address).encodeABI()],[this.$contracts.Farm.options.address,this.$contracts.Farm.methods.userPoolInfo(c["b"].FORCE,this.$address).encodeABI()],[this.$contracts.ACToken.options.address,this.$contracts.ACToken.methods.balanceOf(this.$address).encodeABI()],[this.$contracts.FSVToken.options.address,this.$contracts.FSVToken.methods.balanceOf(this.$address).encodeABI()],[this.$contracts.ACToken.options.address,this.$contracts.ACToken.methods.allowance(this.$address,this.$contracts.Govern.options.address).encodeABI()],[this.$contracts.FSVToken.options.address,this.$contracts.FSVToken.methods.allowance(this.$address,this.$contracts.Govern.options.address).encodeABI()]]).call({from:this.$address},(function(e,n){if(!e){var r=Object(a["a"])(n.returnData,7),s=r[0],o=r[1],i=r[2],c=r[3],d=r[4],u=r[5],f=r[6],p=i.decode([{name:"supply",type:"uint256"},{name:"reward",type:"uint256"},{name:"taked",type:"uint256"},{name:"rewardDebt",type:"uint256"}]);t.burnForce=s.fromWei(),t.invalidForce=o.fromWei(),t.shareForce=p.supply.toBN().plus(o).minus(s).toFixed().fromWei(),t.acBalance=c.fromWei(),t.fsvBalance=d.fromWei(),t.acAllowance=u.fromWei(),t.fsvAllowance=f.fromWei()}}))},input:function(){var t=this;if(!this.inputing){if(Number(this.fsvAmount)<=0)return this.acAmount="",this.sumUSD="0",this.burnGetForce="0",void(this.inputing=!1);this.inputing=!0;var e=setTimeout((function(){if(Number(t.fsvAmount)<=0)return t.acAmount="",t.sumUSD="0",t.burnGetForce="0",t.inputing=!1,void clearTimeout(e);t.$contracts.Multicall.methods.aggregate([[t.$contracts.Govern.options.address,t.$contracts.Govern.methods.getForceByToken(t.$contracts.FSVToken.options.address,t.fsvAmount.toWei(),t.$address).encodeABI()],[t.$contracts.Oracle.options.address,t.$contracts.Oracle.methods.getTokenPrice(t.$contracts.FSVToken.options.address,t.fsvAmount.toWei()).encodeABI()]]).call({from:t.$address},(function(n,r){if(!n){if(Number(t.fsvAmount)<=0)return t.acAmount="",t.sumUSD="0",t.burnGetForce="0",t.inputing=!1,void clearTimeout(e);var s=Object(a["a"])(r.returnData,2),o=s[0],i=s[1],c=o.decode(["uint256","uint256"]),d=Object(a["a"])(c,2),u=d[0],f=d[1];t.burnGetForce=u.fromWei(),t.acAmount=f.fromWei(),t.$contracts.Oracle.methods.getTokenPrice(t.$contracts.ACToken.options.address,f).call({from:t.$address},(function(n,r){if(!n){if(Number(t.fsvAmount)<=0)return t.acAmount="",t.sumUSD="0",t.burnGetForce="0",t.inputing=!1,void clearTimeout(e);t.sumUSD=i.toBN().plus(r).toFixed().fromWei(),t.inputing=!1,clearTimeout(e)}}))}}))}),1e3)}}},approve:function(t){var e=this,n=this.$contracts["".concat(t,"Token")],r=("FSV"===t?this.fsvAmount:this.acAmount).toBN().times(10).toFixed().toWei();n.methods.approve(this.$contracts.Govern.options.address,r).send({from:this.$address}).on("transactionHash",(function(t){e.trading=!0})).on("receipt",function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(s){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.methods.allowance(e.$address,e.$contracts.Govern.options.address).call({from:e.$address});case 2:o=r.sent,e["FSV"===t?"fsvAllowance":"acAllowance"]=o.fromWei(),vant.Toast.success("授权成功！"),e.trading=!1;case 6:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()).on("error",(function(t){e.trading=!1}))},invest:function(){var t=this;if(this.binded)return this.fsvAmount.toBN().gt(this.fsvAllowance)?this.approve("FSV"):this.acAmount.toBN().gt(this.acAllowance)?this.approve("AC"):void this.$contracts.Govern.methods.invest(this.$contracts.FSVToken.options.address,this.fsvAmount.toWei(),this.$address).send({from:this.$address}).on("transactionHash",(function(e){t.trading=!0})).on("receipt",(function(e){vant.Toast.success("治理成功！"),t.$emit("reload"),t.fsvAmount="",t.acAmount="",t.burnGetForce="0",t.trading=!1})).on("error",(function(e){t.trading=!1}));this.$emit("showBind")}},u=d,f=u,p=(n("a568"),n("2877")),m=Object(p["a"])(f,r,s,!1,null,"fca910c2",null);e["default"]=m.exports},"44e7":function(t,e,n){var r=n("861d"),s=n("c6b6"),o=n("b622"),a=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==s(t))}},"5a34":function(t,e,n){var r=n("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},8385:function(t,e,n){},a568:function(t,e,n){"use strict";n("8385")},ab13:function(t,e,n){var r=n("b622"),s=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[s]=!1,"/./"[t](e)}catch(r){}}return!1}},aca7:function(t,e,n){"use strict";n.d(e,"h",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"f",(function(){return m})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return v})),n.d(e,"i",(function(){return g})),n.d(e,"g",(function(){return A}));var r=n("1da1"),s=(n("96cf"),n("4de4"),n("caad"),n("fb6a"),n("2532"),n("d3b7"),n("0d03"),n("99af"),function(t){var e=3600*Math.floor(new Date/1e3/3600);return JSON.stringify({query:'query pair {\n            pair(id: "'.concat(t,'") {\n                reserve0\n                reserve1\n                reserveUSD\n                pairHourData(\n                    where: {\n                        hourStartUnix_gte: ').concat(e-86400,"\n                        hourStartUnix_lte: ").concat(e,"\n                    }\n                ) {\n                    hourlyVolumeUSD\n                    hourlyTxns\n                }\n            }\n        }")})});function o(t){return JSON.stringify({query:"query poolTransactions($address: Bytes!) {\n            mints(first: 35, orderBy: timestamp, orderDirection: desc, where: {\n                pair: $address\n            }) {\n                id\n                timestamp\n                amount0\n                amount1\n            }\n            swaps(first: 35, orderBy: timestamp, orderDirection: desc, where: {\n                pair: $address\n            }) {\n                id\n                timestamp\n                amount0In\n                amount1In\n                amount0Out\n                amount1Out\n            }\n            burns(first: 35, orderBy: timestamp, orderDirection: desc, where: {\n                pair: $address\n            }) {\n                id\n                timestamp\n                amount0\n                amount1\n            }\n        }",variables:{address:t}})}function a(t,e){return i.apply(this,arguments)}function i(){return i=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=6;break}return t.next=3,fetch(e,{cache:"reload"});case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,fetch(e,{cache:"reload",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:n});case 8:t.t0=t.sent;case 9:return r=t.t0,t.next=12,r.json();case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t)}))),i.apply(this,arguments)}var c=["0x18cbafe5","0x7ff36ab5","0x38ed1739"],d=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a("https://api.bscscan.com/api?module=account&action=txlist&address=".concat(e,"&startblock=0&endblock=latest&sort=desc&apikey=YourApiKeyToken"));case 2:return n=t.sent.result,t.abrupt("return",n.filter((function(t){return c.includes(t.input.slice(0,10))})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u="https://bsc.streamingfast.io/subgraphs/name/pancakeswap/exchange-v2",f=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a(u,s(e));case 2:return t.abrupt("return",t.sent.data.pair);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p={LP:0,FORCE:1,BOARD:2,NFT:3};function m(t){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a(u,o(e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}var l={address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",decimals:18,logoURI:"https://chainconfig.github.io/bsc/tokens/0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c.png",symbol:"BNB"},b={address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",decimals:18,logoURI:"https://chainconfig.github.io/bsc/tokens/0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c.png",symbol:"BNB"},v={name:"Binance Pegged USDT",address:"0x55d398326f99059fF775485246999027B3197955",decimals:18,logoURI:"https://chainconfig.github.io/bsc/tokens/0x55d398326f99059fF775485246999027B3197955.png",symbol:"USDT"},g=[{symbol:"BNB",address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",logoURI:"https://chainconfig.github.io/bsc/tokens/0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c.png"},{symbol:"BUSD",address:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",logoURI:"https://chainconfig.github.io/bsc/tokens/0xe9e7cea3dedca5984780bafc599bd69add087d56.png"},{symbol:"USDT",address:"0x55d398326f99059fF775485246999027B3197955",logoURI:"https://chainconfig.github.io/bsc/tokens/0x55d398326f99059fF775485246999027B3197955.png"},{symbol:"USDC",address:"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d",logoURI:"https://chainconfig.github.io/bsc/tokens/0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d.png"},{symbol:"ETH",address:"0x2170ed0880ac9a755fd29b2688956bd959f933f8",logoURI:"https://chainconfig.github.io/bsc/tokens/0x2170ed0880ac9a755fd29b2688956bd959f933f8.png"}];function A(t,e){for(var n=g.filter((function(n){return![t.symbol,e.symbol].includes(n.symbol)})),r=[[t,e]],s=0;s<n.length;s++){r.push([t,n[s],e]);for(var o=s+1;o<n.length;o++)r.push([t,n[s],n[o],e])}return r}},c2fd:function(t,e,n){t.exports=n.p+"img/plus-green.4ed209f7.svg"},c776:function(t,e,n){t.exports=n.p+"img/nft-token.834fd726.svg"},caad:function(t,e,n){"use strict";var r=n("23e7"),s=n("4d64").includes,o=n("44d2");r({target:"Array",proto:!0},{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")}}]);