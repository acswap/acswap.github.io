(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-acd1f0a4"],{"24a9":function(t,e,s){},"982c":function(t,e,s){t.exports=s.p+"img/select-btn-dark.4411a6c3.svg"},b7eb:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:"power-mining "+t.theme},[n("div",{staticClass:"container"},[t._m(0),n("div",{staticClass:"info"},[n("div",[n("span",[t._v("矿池 AC：")]),n("span",[t._v(t._s(t.poolTotalSuppy.toFixed(4)))])]),n("div",[n("span",[t._v("今日出矿 AC：")]),n("span",[t._v(t._s(t.todayOutput))])]),n("div",[n("span",[t._v("我的算力 AC：")]),n("span",[t._v(t._s(t.myForce.toFixed(4)))])])]),n("div",{staticClass:"lable"},[n("span",[t._v("参与销毁")]),n("span",[t._v("余额 "),n("span",[t._v(t._s(t.acBalance))]),t._v(" AC")])]),n("div",{staticClass:"amount"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:"输入数量"},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},t.input]}}),t._m(1)]),n("div",{staticClass:"get-power"},[n("span",[t._v("获得算力")]),n("span",[t._v(t._s(t.destoryGetPower.toFixed(4)))])]),n("div",{staticClass:"receiver-container"},[n("div",{staticClass:"receiver"},[n("span",[t._v("接收方")]),n("div",{on:{click:function(e){t.showOptions=!t.showOptions}}},[n("span",[t._v(t._s(t.receiver))]),n("img",{attrs:{src:s("982c")}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showOptions,expression:"showOptions"}],staticClass:"options"},[n("span",{on:{click:function(e){return t.switchReceiver("自己")}}},[t._v("自己")]),n("span",{on:{click:function(e){return t.switchReceiver("他人")}}},[t._v("他人")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showOptions,expression:"showOptions"}],staticClass:"overlay",on:{click:function(e){e.stopPropagation(),t.showOptions=!1}}})])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.toAddress,expression:"toAddress"}],attrs:{type:"text",placeholder:"输入算力接收地址",readonly:"自己"===t.receiver},domProps:{value:t.toAddress},on:{input:function(e){e.target.composing||(t.toAddress=e.target.value)}}})]),n("button",{staticClass:"ant-btn ",attrs:{loading:t.trading,disabled:0===t.amount.length||t.trading},on:{click:t.burnBasisToken}},[t._v(t._s(t.btnText))])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("div",{staticClass:"content"},[s("span",[t._v("销毁AC获得算力")]),s("span",[t._v("算力享受AC矿池的铸币权")])]),s("div",{staticClass:"buttons"},[s("span",[t._v("核心")]),s("span",[t._v("60X")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{attrs:{src:s("f387")}}),n("span",[t._v("AC")])])}],o=s("1da1"),r=s("5530"),i=(s("96cf"),s("a9e3"),s("b680"),s("4795"),{data:function(){return{showOptions:!1,address:this.$address,poolTotalSuppy:"0",todayOutput:"0",myForce:"0",acBalance:"0",amount:"",inputing:!1,destoryGetPower:"0",receiver:"自己",toAddress:"",acAllowance:"0",trading:!1}},computed:Object(r["a"])(Object(r["a"])({},Vuex.mapState(["slippage","deadline","theme"])),{},{btnText:function(){return this.amount.toBN().gt(this.acBalance)?vant.Toast.fail("余额不足！"):this.trading?"区块确认中":0===this.amount.length?"输入数量":this.amount.toBN().gt(this.acAllowance)?"批准合约":"确认"}}),created:function(){this.init()},methods:{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.toAddress=t.address,s=new t.$web3.BatchRequest,e.t0=Number,e.next=5,t.$web3.eth.getBlock("latest");case 5:e.t1=e.sent.timestamp,n=(0,e.t0)(e.t1),a=86400*Math.floor(n/86400),s.add(t.$contracts.Farm.methods.pools(PoolType.FORCE).call.request({from:t.address})),s.add(t.$contracts.Farm.methods.getOutPut(a,n).call.request({from:t.address})),s.add(t.$contracts.ForceToken.methods.balanceOf(t.address).call.request({from:t.address})),s.add(t.$contracts.ACToken.methods.balanceOf(t.address).call.request({from:t.address})),s.add(t.$contracts.ACToken.methods.allowance(t.address,t.$contracts.Govern.options.address).call.request({from:t.address})),s.add(t.$contracts.Farm.methods.userPoolInfo(PoolType.FORCE,t.address).call.request({from:t.address})),s.requestManager.sendBatch(s.requests,(function(e,s){if(!e){var n=s[0].result.decode([{name:"token",type:"address"},{name:"allocPoint",type:"uint256"},{name:"lastTime",type:"uint256"},{name:"totalSupply",type:"uint256"},{name:"accTokenPerShare",type:"uint256"},{name:"types",type:"uint8"},{name:"extraReward",type:"address"}]),a=s[5].result.decode([{name:"supply",type:"uint256"},{name:"reward",type:"uint256"},{name:"taked",type:"uint256"},{name:"rewardDebt",type:"uint256"}]);t.poolTotalSuppy=n.totalSupply.fromWei(),t.todayOutput=s[1].result.fromWei(),t.myForce=s[2].result.toBN().plus(a.supply).toFixed().fromWei(),t.acBalance=s[3].result.fromWei(),t.acAllowance=s[4].result.fromWei()}}));case 15:case"end":return e.stop()}}),e)})))()},switchReceiver:function(t){this.receiver=t,"自己"===this.receiver?this.toAddress=this.address:this.toAddress=""},input:function(){var t=this;if(!this.inputing){if(this.amount.length<=0||this.amount.toBN().lte(0))return this.destoryGetPower="0",void(this.inputing=!1);this.inputing=!0;var e=setTimeout((function(){if(t.amount.length<=0||t.amount.toBN().lte(0))return t.destoryGetPower="0",t.inputing=!1,void clearTimeout(e);t.$contracts.Govern.methods.getForceByBasisToken(t.amount.toWei()).call({from:t.address},(function(s,n){if(!s){if(t.amount.length<=0||t.amount.toBN().lte(0))return t.destoryGetPower="0",t.inputing=!1,void clearTimeout(e);t.destoryGetPower=n.fromWei(),t.inputing=!1,clearTimeout(e)}}))}),500)}},approve:function(){var t=this;this.$contracts.ACToken.methods.approve(this.$contracts.Govern.options.address,this.amount.toBN().times(10).toFixed().toWei()).send({from:this.address}).on("transactionHash",(function(e){t.trading=!0})).on("receipt",function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(s){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$contracts.ACToken.methods.allowance(t.address,t.$contracts.Govern.options.address).call({from:t.address});case 2:n=e.sent,t.acAllowance=n.fromWei(),vant.Toast.success("授权成功！"),t.trading=!1;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){t.trading=!1}))},burnBasisToken:function(){var t=this;if(this.acAllowance.toBN().lt(this.amount))return this.approve();var e=this.$contracts.Govern.methods.burnBasisToken(this.amount.toWei(),this.address);e.call({from:this.address},(function(s,n){s||e.send({from:t.address}).on("transactionHash",(function(e){t.trading=!0})).on("receipt",(function(e){vant.Toast.success("销毁成功！"),t.$emit("reload"),t.init(),t.amount="",t.destoryGetPower="0",t.trading=!1})).on("error",(function(e){t.trading=!1}))}))}}}),c=i,d=c,u=(s("edbb"),s("2877")),l=Object(u["a"])(d,n,a,!1,null,"73c5a460",null);e["default"]=l.exports},edbb:function(t,e,s){"use strict";s("24a9")},f387:function(t,e,s){t.exports=s.p+"img/nft-token.834fd726.svg"}}]);