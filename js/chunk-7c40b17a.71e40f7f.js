(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c40b17a"],{"020c":function(t,s,e){"use strict";e("488c")},"488c":function(t,s,e){},bf27:function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"popups",on:{click:t.close}},[s("div",{staticClass:"lp-pledge",on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"header"},[s("span",[t._v(t._s(t.$t("lpPledge.text1")))]),s("a-icon",{attrs:{type:"close"},on:{click:t.close}})],1),s("span",[t._v(t._s(t.$t("lpPledge.text2")))]),s("div",{staticClass:"amount"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:t.$t("lpPledge.text3")},domProps:{value:t.amount},on:{input:function(s){s.target.composing||(t.amount=s.target.value)}}}),s("span",[t._v(t._s(t.poolInfo.symbol))]),s("a-button",{on:{click:function(s){t.amount=t.balance}}},[t._v(t._s(t.$t("lpPledge.text4")))])],1),s("span",[t._v(t._s(t.$t("lpPledge.text5"))+" "),s("span",[t._v(t._s(t.balance.toFixed(2)))]),t._v(" "+t._s(t.poolInfo.symbol))]),s("router-link",{attrs:{to:"/liquidity"}},[t._v(t._s(t.$t("lpPledge.text6")))]),s("a-button",{attrs:{disabled:t.disabled,loading:t.trading},on:{click:t.deposit}},[t._v(t._s(t.btnText))])],1)])},a=[],i=(e("277a"),e("8d0a")),n=(e("38c6"),e("64c8")),l=e("6eef"),c=e("e549"),r={components:{[n["a"].name]:n["a"]},data(){return{show:!1,amount:"",balance:"0",allowance:"0",trading:!1,poolInfo:{symbol:""}}},computed:{...Object(l["b"])(["connect","address","chainId"]),disabled(){return this.trading||+this.amount<=0},btnText(){return this.trading?this.$t("lpPledge.text7"):Number(this.amount)<=0?this.$t("lpPledge.text3"):this.amount.toBN().gt(this.allowance)?this.$t("lpPledge.text8"):this.$t("lpPledge.text9")}},methods:{close(){this.show=!1},init(t){this.getDatas(t),this.poolInfo=t,this.show=!0},getDatas(t){const s=new this.$web3.eth.Contract(c,t.pair);s.methods.balanceOf(this.address).call((t,s)=>{t||(this.balance=s.fromWei())}),s.methods.allowance(this.address,this.$contracts.Farm.options.address).call((t,s)=>{t||(this.allowance=s.fromWei())})},approve(){this.trading=!0;const t=new this.$web3.eth.Contract(c,this.poolInfo.pair);t.methods.approve(this.$contracts.Farm.options.address,this.amount.toBN().times(1e19).toFixed()).send({from:this.address}).on("receipt",async()=>{const s=await t.methods.allowance(this.address,this.$contracts.Farm.options.address).call();this.allowance=s.fromWei(),i["a"].success(this.$t("approved_success")),this.trading=!1,this.deposit()}).on("error",t=>{this.trading=!1})},async deposit(){if(this.amount.toBN().gt(this.allowance))return this.approve();this.trading=!0;const t=this.$contracts.Farm.methods.deposit(this.poolInfo.pair,[this.amount.toWei()]);try{await t.call({from:this.address}),t.send({from:this.address}).on("receipt",()=>{this.getDatas(this.poolInfo),this.$emit("reload"),i["a"].success(this.$t("pledge_success")),this.amount="",this.trading=!1}).on("error",t=>{this.trading=!1,console.log(t)})}catch(s){this.trading=!1,console.log(s)}}}},d=r,h=d,p=(e("020c"),e("c6fb")),u=Object(p["a"])(h,o,a,!1,null,"37d17636",null);s["default"]=u.exports}}]);