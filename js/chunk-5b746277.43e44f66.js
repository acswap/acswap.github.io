(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b746277"],{"226e":function(t,e,s){"use strict";var r=s("156d"),n=s("7db5"),a=s("6403"),i=s("3b65"),o=TypeError,c="Reduce of empty array with no initial value",u=function(t){return function(e,s,u,l){var d=n(e),g=a(d),h=i(d);if(r(s),0===h&&u<2)throw new o(c);var f=t?h-1:0,p=t?-1:1;if(u<2)while(1){if(f in g){l=g[f],f+=p;break}if(f+=p,t?f<0:h<=f)throw new o(c)}for(;t?f>=0:h>f;f+=p)f in g&&(l=s(l,g[f],f,d));return l}};t.exports={left:u(!1),right:u(!0)}},"47b7":function(t,e,s){t.exports=s.p+"img/prev-light.453ec76f.svg"},4808:function(t,e,s){t.exports=s.p+"img/next-dark.dca4d14d.svg"},"4b5c":function(t,e,s){"use strict";s("c42b")},"4fca":function(t,e,s){var r={"./prev-dark.svg":"6949","./prev-light.svg":"47b7"};function n(t){var e=a(t);return s(e)}function a(t){if(!s.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=a,t.exports=n,n.id="4fca"},"5c58":function(t,e,s){t.exports=s.p+"img/next-light.0c9a28a4.svg"},"62f7":function(t,e,s){var r={"./next-dark.svg":"4808","./next-light.svg":"5c58"};function n(t){var e=a(t);return s(e)}function a(t){if(!s.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=a,t.exports=n,n.id="62f7"},6949:function(t,e,s){t.exports=s.p+"img/prev-dark.a359ab54.svg"},b11a:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"log"},[e("div",{staticClass:"taked"},[e("span",[t._v(t._s(t.taked.toFixed(2)))]),e("span",[t._v(t._s(t.$t("total_mining"))+"/AC")])]),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("log.text3")))]),e("span",[t._v(t._s(t.$t("log.text4")))])]),e("div",{staticClass:"list"},[e("div",{staticClass:"header"},[e("span",[t._v(t._s(t.$t("log.text5")))]),e("span",[t._v(t._s(t.$t("log.text6")))]),e("span",[t._v(t._s(t.$t("log.text7")))])]),t._l(t.list[t.currentPage],(function(s,r){return e("div",{key:r},[e("span",[t._v(t._s(s.type))]),e("span",[t._v(t._s(s.amount.toFixed()))]),e("span",[t._v(t._s(s.time))])])}))],2),e("div",{staticClass:"pager"},[e("img",{class:{disabled:0===t.currentPage},attrs:{src:s("4fca")(`./prev-${0===t.currentPage?"dark":"light"}.svg`)},on:{click:t.prevPage}}),e("span",[t._v(t._s(t.currentPage+1)+"/"+t._s(t.list.length))]),e("img",{class:{disabled:t.currentPage===t.list.length-1},attrs:{src:s("62f7")(`./next-${t.currentPage===t.list.length-1?"dark":"light"}.svg`)},on:{click:t.nextPage}})])])])},n=[],a=(s("2b12"),s("c54c"),{data(){return{taked:0,list:[],currentPage:0}},created(){this.$contracts&&this.init()},methods:{init(){this.$contracts.Farm.methods.poolLength().call((t,e)=>{const s=new this.$web3.BatchRequest;for(let r=0;r<+e;r++)s.add(this.$contracts.Farm.methods.pools(r).call.request("latest"));s.requestManager.sendBatch(s.requests,(t,e)=>{t||this.getTaked(e.map(t=>(t.result||t).decode(["address"])))})}),this.$web3.eth.getBlockNumber().then(async t=>{const e=t-5e3>=0?t-5e3:0,s=await this.getLogs(e,t,0);let r=0;this.list=s.reverse().reduce((t,e,s)=>((s+1)%10===0&&(r++,t[r]=[]),t[r].push(e),t),[[]])})},getTaked(t){const e=new this.$web3.BatchRequest;for(let s=0;s<t.length;s++)e.add(this.$contracts.Farm.methods.userInfo(t[s],this.$address).call.request("latest"));e.requestManager.sendBatch(e.requests,(t,e)=>{if(!t){let t="0".toBN();for(let s=0;s<e.length;s++){const r=(e[s].result||e[s]).decode([{type:"uint256",name:"power"},{type:"uint256",name:"reward"},{type:"uint256",name:"taked"},{type:"uint256",name:"rewardDebt"}]);t=t.plus(r.taked.fromWei())}this.taked=t.toFixed()}})},getLogs(t,e,s){return new Promise(r=>{this.$contracts.Farm.getPastEvents("TakeReward",{filter:{user:this.$address},fromBlock:t,toBlock:e}).then(async n=>{const a=Number((await this.$web3.eth.getBlock("latest")).timestamp);let i=n.map(t=>{const e=t.returnValues;let s=this.$t("lp_mining");return e.token.toBN().eq(this.$contracts.AcNFT.options.address.toBN())?s=this.$t("nft_mining"):e.token.toBN().eq(this.$contracts.AcDAO.options.address.toBN())&&(s=this.$t("node_mining")),{type:s,amount:e.reward.fromWei(),time:this.formatTime(a,e.time)}});0===t||3===s?r(i):(e=t,t-=5e3,s++,t<0&&(t=0),r(i.concat(await this.getLogs(t,e,s))))})})},formatTime(t,e){const s=t-Number(e);return s/3600/24>0?`${Math.floor(s/3600/24)}${this.$t("log.text12")}`:s/3600>0?`${Math.floor(s/3600)}${this.$t("log.text13")}`:s/60>0?`${Math.floor(s/60)}${this.$t("log.text14")}`:`${s}${this.$t("log.text15")}`},prevPage(){0!==this.currentPage&&this.currentPage--},nextPage(){this.currentPage+1!==this.list.length&&this.currentPage++}}}),i=a,o=i,c=(s("4b5c"),s("b01b")),u=Object(c["a"])(o,r,n,!1,null,"47b1cc7f",null);e["default"]=u.exports},ba33:function(t,e,s){"use strict";var r=s("ee4c"),n=s("28ca");t.exports="process"===n(r.process)},bb4e:function(t,e,s){"use strict";var r=s("a067");t.exports=function(t,e){var s=[][t];return!!s&&r((function(){s.call(null,e||function(){return 1},1)}))}},c42b:function(t,e,s){},c54c:function(t,e,s){"use strict";var r=s("6982"),n=s("226e").left,a=s("bb4e"),i=s("84d1"),o=s("ba33"),c=!o&&i>79&&i<83,u=c||!a("reduce");r({target:"Array",proto:!0,forced:u},{reduce:function(t){var e=arguments.length;return n(this,t,e,e>1?arguments[1]:void 0)}})}}]);