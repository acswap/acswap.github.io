(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a540b64","chunk-2d237c35"],{"0703":function(t,e,s){t.exports=s.p+"img/setting.26a1e889.svg"},1487:function(t,e,s){"use strict";s("1db1")},"191a":function(t,e,s){t.exports=s.p+"img/rate-switch.1543baa5.svg"},"1db1":function(t,e,s){},2072:function(t,e,s){t.exports=s.p+"img/swap-success.38266ded.svg"},2430:function(t,e,s){"use strict";s("4714")},"2fbf":function(t,e,s){t.exports=s.p+"img/slippage.3caf05c0.svg"},"3e93":function(t,e,s){t.exports=s.p+"img/look.46575a8e.svg"},4714:function(t,e,s){},"4c4a":function(t,e,s){},"605e":function(t,e,s){t.exports=s.p+"img/router-path.c15dc1ec.svg"},7085:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"swap"},[e("div",{staticClass:"content"},[e("div",{staticClass:"container"},[e("div",{staticClass:"form"},[e("div",{staticClass:"input"},[e("div",{staticClass:"container"},[e("div",{staticClass:"select-token-btn"},[e("span",{staticClass:"lable"},[t._v(t._s(t.$t("swap.text1")))]),e("div",{on:{click:function(e){return t.openSearch("token0")}}},[e("img",{staticClass:"token-logo",attrs:{src:t.token0.logoURI}}),e("span",{domProps:{textContent:t._s(t.token0.symbol)}}),e("img",{attrs:{src:s("e4b1")}})])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount0,expression:"amount0"}],attrs:{type:"number",placeholder:"0.0"},domProps:{value:t.amount0},on:{input:[function(e){e.target.composing||(t.amount0=e.target.value)},t.input]}})]),e("span",{on:{click:t.allIn}},[t._v(t._s(`${t.$t("transaction.text2")} ${t.balance.toFixed()}`))])]),e("div",{staticClass:"slider"},[e("img",{attrs:{src:s("7dd5")},on:{click:t.switchToken}}),e("div",{staticClass:"slider"},[e("van-slider",{attrs:{"active-color":"#0CC9B5","inactive-color":"#0C252F"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e("div",{staticClass:"scale"},[e("span",{on:{click:function(e){t.value=0}}},[t._v("0")]),e("span",{on:{click:function(e){t.value=25}}},[t._v("25%")]),e("span",{on:{click:function(e){t.value=50}}},[t._v("50%")]),e("span",{on:{click:function(e){t.value=75}}},[t._v("75%")]),e("span",{on:{click:function(e){t.value=100}}},[t._v("100%")])])],1)]),e("div",{staticClass:"input"},[e("div",{staticClass:"container"},[e("div",{staticClass:"select-token-btn"},[e("span",{staticClass:"lable"},[t._v(t._s(t.$t("swap.text4")))]),e("div",{on:{click:function(e){return t.openSearch("token1")}}},[e("img",{staticClass:"token-logo",attrs:{src:t.token1.logoURI}}),e("span",{domProps:{textContent:t._s(t.token1.symbol)}}),e("img",{attrs:{src:s("e4b1")}})])]),e("input",{attrs:{type:"number",placeholder:"0.0",readonly:""},domProps:{value:t.amount1.toFixed()}})]),e("span",[t._v(t._s(`${t.$t("transaction.text2")} ${t.balance1.toFixed()}`))])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.amount0.toBN().gt(0)&&!t.invalidPair,expression:"amount0.toBN().gt(0) && !invalidPair"}],staticClass:"trade-info"},[e("div",{staticClass:"info-item rate"},[e("span",[t._v(t._s(t.$t("transaction.text4")))]),e("div",[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.rerate,expression:"!rerate"}]},[t._v(t._s(`1 ${t.token0.symbol} ≈ ${t.rate1.toFixed(4)} ${t.token1.symbol}`))]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.rerate,expression:"rerate"}]},[t._v(t._s(`1 ${t.token1.symbol} ≈ ${t.rate0.toFixed(4)} ${t.token0.symbol}`))]),e("img",{attrs:{src:s("191a")},on:{click:function(e){t.rerate=!t.rerate}}})])]),e("div",{staticClass:"info-item slippage"},[e("span",[t._v(t._s(t.$t("slippage")))]),e("div",{on:{click:t.showTradingSetup}},[e("span",[t._v(t._s(t.slippage.toFixed(2))+"%")]),e("img",{attrs:{src:s("2fbf")}})])]),e("div",{staticClass:"info-item"},[e("span",[t._v(t._s(t.$t("nftswap.text5")))]),e("span",[t._v(t._s(t.gasPrice))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:[t.token0.symbol,t.token1.symbol].includes("AC"),expression:"[token0.symbol, token1.symbol].includes('AC')"}],staticClass:"info-item"},[e("span",[t._v(t._s(t.$t("nftswap.text6")))]),e("span",[t._v(t._s(t.gasPrice))])]),t.routerInfo?e("div",{staticClass:"info-item router"},[e("span",[t._v(t._s(t.$t("transaction.text15")))]),e("div",[e("span",[t._v(t._s(t.token0.symbol))]),e("img",{attrs:{src:s("605e")}}),Array.isArray(t.routerInfo)?[t.routerInfo.length>2?e("span",[t._v(t._s(t.routerInfo[1].symbol))]):t._e(),t.routerInfo.length>2?e("img",{attrs:{src:s("605e")}}):t._e(),t.routerInfo.length>3?e("span",[t._v(t._s(t.routerInfo[2].symbol))]):t._e(),t.routerInfo.length>3?e("img",{attrs:{src:s("605e")}}):t._e()]:[t.routerInfo.tokensPath.length>2?e("span",[t._v(t._s(t.routerInfo.tokensPath[1].symbol))]):t._e(),t.routerInfo.tokensPath.length>2?e("img",{attrs:{src:s("605e")}}):t._e(),t.routerInfo.tokensPath.length>3?e("span",[t._v(t._s(t.routerInfo.tokensPath[2].symbol))]):t._e(),t.routerInfo.tokensPath.length>3?e("img",{attrs:{src:s("605e")}}):t._e()],e("span",[t._v(t._s(t.token1.symbol))])],2)]):t._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:Number(t.amount0)<=0||t.invalidPair,expression:"(Number(amount0) <= 0) || invalidPair"}],staticClass:"btn-container"},[e("img",{attrs:{src:s("0703")},on:{click:t.showTradingSetup}}),e("van-button",{directives:[{name:"show",rawName:"v-show",value:Number(t.amount0)<=0||t.invalidPair,expression:"(Number(amount0) <= 0) || invalidPair"}],attrs:{disabled:""}},[t._v(t._s(Number(t.amount0)<=0?t.$t("swap.text7"):t.$t("swap.text6")))])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.amount0.toBN().gt(0)&&!t.invalidPair,expression:"amount0.toBN().gt(0) && !invalidPair"}],staticClass:"buttons"},[e("van-button",{attrs:{loading:"approve"===t.transactionState,disabled:!t.needApprove},on:{click:t.approve}},[t._v(t._s("approve"===t.transactionState?t.$t("swap.text8"):t.$t("swap.text9")))]),e("van-button",{attrs:{loading:"in"===t.transactionState,disabled:t.needApprove},on:{click:t.exchange}},[t._v(t._s("in"===t.transactionState?t.$t("swap.text10"):t.$t("swap.text11")))])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.amount0.toBN().gt(0)&&!t.invalidPair,expression:"amount0.toBN().gt(0) && !invalidPair"}],staticClass:"steps"},[e("span",{staticClass:"active"},[t._v("1")]),e("i",{class:{active:!t.needApprove}}),e("span",{class:{active:!t.needApprove}},[t._v("2")])])])]),t.latestSwap?e("div",{staticClass:"history"},[e("span",[t._v(t._s(t.$t("swap.text12")))]),e("div",{staticClass:"content"},[e("div",{staticClass:"header"},[e("span",[t._v(t._s(t.$t("Transactioni.text12"))+" "),e("span",[t._v(t._s(t.latestSwap.date))])]),e("a",{attrs:{target:"_",href:t.latestSwap.hash}},[e("span",[t._v(t._s(t.$t("swap.text13")))]),e("img",{attrs:{src:s("3e93")}})])]),e("div",{staticClass:"info"},[e("div",[e("span",[t._v(t._s(t.latestSwap.router[0]))]),e("span",[t._v(t._s(t.latestSwap.amount0.toFixed(6)))])]),e("img",{attrs:{src:s("2072")}}),e("div",[e("span",[t._v(t._s(t.latestSwap.router[t.latestSwap.router.length-1]))]),e("span",[t._v(t._s(t.latestSwap.amount1.toFixed(6)))])])]),e("div",{staticClass:"router"},[e("span",[t._v(t._s(t.$t("transaction.text15")))]),e("div",[e("span",[t._v(t._s(t.latestSwap.router[0]))]),e("img",{attrs:{src:s("605e")}}),e("span",[t._v(t._s(t.latestSwap.router[1]))]),t.latestSwap.router.length>2?[e("img",{attrs:{src:s("605e")}}),e("span",[t._v(t._s(t.latestSwap.router[2]))])]:t._e(),t.latestSwap.router.length>3?[e("img",{attrs:{src:s("605e")}}),e("span",[t._v(t._s(t.latestSwap.router[3]))])]:t._e()],2)])])]):e("div",{staticClass:"no-deals"},[e("img",{attrs:{src:s("98bc")}}),e("span",[t._v(t._s(t.$t("Transactioni.text5")))])]),t.showAirDrop?e("ac-airdrop",{attrs:{airdropNum:t.airdropNum},on:{close:function(e){t.showAirDrop=!1}}}):t._e(),e("transation-state",{attrs:{state:t.transactionState,from:{amount:t.amount0,symbol:t.token0.symbol},to:{amount:t.amount1.toFixed(),symbol:t.token1.symbol},"slip-point":t.slippage,min:t.amountOutMin,"to-price":t.rate1,"from-price":t.rate0},on:{exchange:t.sendTokenTransaction,close:t.close}}),e("search-tokens",{ref:"searchTokens",on:{select:t.select}}),e("trading-setup",{ref:"TradingSetup",attrs:{token1:t.token1,amountIn:t.amount0}})],1)},i=[],n=(s("f8b6"),s("36ad")),o=(s("2b12"),s("b500"),s("c55c")),r=s("6eef"),h=s("aca7"),c=s("1b4b"),d={components:{[o["a"].name]:o["a"],"mk-header":()=>s.e("chunk-b922bcee").then(s.bind(null,"68d4")),"search-tokens":()=>s.e("chunk-45c82f1e").then(s.bind(null,"bab4")),"transation-state":()=>s.e("chunk-2da0ef69").then(s.bind(null,"5942")),"ac-airdrop":()=>s.e("chunk-7e6a98e4").then(s.bind(null,"4ef2")),"trading-setup":()=>s.e("chunk-245b5e4e").then(s.bind(null,"0430"))},data(){return{balance:0,balance1:0,gasPrice:"0.25%",ERC20Contract:null,allowance:0,value:0,amountOutMin:0,disabled:!1,rerate:!1,transactionState:"",gasPopover:!1,gasActions:[{text:this.$t("Transactioni.text7")}],token0:h["a"],token1:h["b"],amount0:"",amount1:"",rate0:"--",rate1:"--",reserve0:0,reserve1:0,routerInfo:null,inputing:!1,latestSwap:null,showAirDrop:!1,airdropNum:"???",factorys:[],initCodes:{},lastEnter:""}},computed:{...Object(r["b"])(["slippage","deadline","chainId"]),invalidPair(){return!this.routerInfo},needApprove(){const t=c["a"][this.chainId];return this.token0.symbol!==t.mainCoin.symbol&&this.amount0.toBN().gt(this.allowance)}},watch:{value(){const t=(this.balance/100*this.value).toFixed(6);this.amount0=t||"",this.input()}},destroyed(){clearInterval(this.interval)}},l=s("b9cc"),u={...d,created(){if(this.$address){const t=c["a"][this.chainId];this.token0=t.mainCoin,this.token1=t.defaultCoin,0!=this.chainId&&this.$Aggregation?this.$Aggregation.methods.allFactory().call({from:this.$address},(t,e)=>{if(!t){this.factorys=e;const t=new this.$web3.BatchRequest;for(let s=0;s<e.length;s++)t.add(this.$Aggregation.methods.initCodes(e[s]).call.request({from:this.$address}));t.requestManager.sendBatch(t.requests,(t,s)=>{if(!t){this.initCodes[e[0]]=("string"===typeof s[0]?s[0]:s[0].result).decode(["bytes32"]);for(let t=1;t<e.length;t++)this.initCodes[e[t]]=s[t].result.decode(["bytes32"]);this.init()}})}}):this.init(),this.interval=setInterval(()=>{"none"===this.transactionState&&this.init()},1e4);const e=setTimeout(()=>{this.reloadSlippage(),clearTimeout(e)},2e3)}},methods:{showTradingSetup(){this.$refs.TradingSetup.open()},async reloadSlippage(){const t=await this.searchRouter("slippage");this.$refs.TradingSetup.init(t.tokensPath)},init(){const t=this.$route.query;t.token?this.select({token:JSON.parse(t.token),who:"token1"}):this.select({token:this.token0,who:"token0"}),this.getTransactions()},allIn(){this.amount0=this.balance,this.amount1=this.balance1,this.input()},close(){this.amount0="",this.amount1="",this.transactionState="none",this.init()},toInfo(){const t=c["a"][this.chainId],e=this.token1.symbol===t.mainCoin.symbol?this.token1:this.token0,s=this.token1.symbol===t.mainCoin.symbol?this.token0:this.token1;this.$router.push({path:"/tokenInfo",query:{token0:JSON.stringify(e),token1:JSON.stringify(s)}})},openSearch(t){this.$refs.searchTokens.open(t)},switchToken(){const t=this.token0;this.token0=this.token1,this.token1=t,this.select({token:t,who:"token1"})},input(){if(Number(this.amount0)<=0)return this.amount1="",this.disabled=!0,void(this.gasPrice="0.25%");if(this.inputing)return;this.inputing=!0,this.disabled=!1,this.lastEnter=this.amount0,this.gasPrice=`${this.amount0.toBN().times(.0025).toFixed().toFixed(this.token0.decimals)} ${this.token0.symbol}`;const t=setTimeout(async()=>{if(Number(this.amount0)<=0)return this.amount1="",this.gasPrice="0.25%",this.disabled=!0,this.inputing=!1,void clearTimeout(t);const e=await this.searchRouter();this.routerInfo=e,this.$refs.TradingSetup.init(e.tokensPath),this.inputing=!1,clearTimeout(t),this.lastEnter!==this.amount0&&this.input()},500)},getReserves(){return new Promise(t=>{const e=Object(h["f"])(this.token0,this.token1,c["e"][this.chainId],this.factorys),s=[];for(let a=0;a<e.length;a++)s.push([this.$Aggregation.options.address,this.$Aggregation.methods.getReserves(e[a].factory,this.initCodes[e[a].factory],e[a].token0.address,e[a].token1.address).encodeABI()]);this.$Multicall.methods.tryAggregate(!1,s).call({from:this.$address},(s,a)=>{if(!s){const s={};for(let t=0;t<e.length;t++){if(!a[t].success)continue;const{reserve0:i,reserve1:n}=a[t].returnData.decode([{type:"uint256",name:"reserve0"},{type:"uint256",name:"reserve1"}]);Object.prototype.hasOwnProperty.call(s,e[t].factory)?s[e[t].factory].push({...e[t],reserve0:i,reserve1:n}):s[e[t].factory]=[{...e[t],reserve0:i,reserve1:n}]}t(s)}})})},async getAmountsOut(t,e){const s=this.$Aggregation?this.$Aggregation.methods.getAmountsOut(t.toWei(e.tokensPath[0].decimals),e.tokensPath.map(t=>t.address),e.factorysPath):(0==this.chainId?this.$Router:this.$Router.methods).getAmountsOut(t.toWei(e[0].decimals),e.map(t=>t.address)),a=await s.call({from:this.$address}),i=Array.isArray(e)?e:e.tokensPath,n=i.length-1;return(0==this.chainId?a[n]._hex:a[n]).fromWei(i[n].decimals).toFixed(i[n].decimals)},exchange(){if(this.amount0.toBN().gt(this.balance))return n["a"].fail(this.$t("transaction.text12"));const t=c["a"][this.chainId];this.token0.symbol===t.mainCoin.symbol?this.swapExactETHForTokens():this.amount0.toBN().gt(this.allowance)?this.approve():this.sendTokenTransaction()},sendTokenTransaction(){const t=c["a"][this.chainId];this.token1.symbol===t.mainCoin.symbol?this.swapExactTokensForETH():this.swapExactTokensForTokens()},approve(){if(this.amount0.toBN().gt(this.balance))return n["a"].fail(this.$t("transaction.text12"));const t=0==this.chainId?window.tronWeb.contract(l,this.token0.address):new this.$web3.eth.Contract(l,this.token0.address),e=0==this.chainId?this.$Router.address:(this.$Aggregation||this.$Router).options.address,s=(0==this.chainId?t:t.methods).approve(e,this.amount0.toWei(this.token0.decimals).toBN().times(10).toFixed()).send({from:this.$address});0==this.chainId?s.then(async s=>{if(this.transactionState="approve",await this.$loading(s)){const s=await t.allowance(this.$address,e).call({from:this.$address});this.allowance=s._hex.fromWei(this.token0.decimals),this.transactionState="approved"}else this.transactionState="none",this.amount1=""}):s.on("transactionHash",t=>{this.transactionState="approve"}).on("receipt",t=>{this.transactionState="approved"}).on("error",t=>{n["a"].fail(this.$t("Transactioni.text2")),this.transactionState="none",this.amount1=""})},swapExactETHForTokens(){if(this.lastEnter!==this.amount0)return;const t=Math.floor((new Date).getTime()/1e3)+this.deadline,e=this.amount1.toWei(this.token1.decimals).toBN(),s=e.minus(e.div(100).times(this.slippage)).toFixed(0);this.amountOutMin=s.fromWei(this.token1.decimals).toFixed();const a=(this.$Aggregation?this.$Aggregation.methods.swapExactETHForTokens(s,this.routerInfo.tokensPath.map(t=>t.address),this.routerInfo.factorysPath,this.$address,t):(0==this.chainId?this.$Router:this.$Router.methods).swapExactETHForTokens(s,this.routerInfo.map(t=>t.address),this.$address,t)).send({from:this.$address,[0==this.chainId?"callValue":"value"]:this.amount0.toWei(this.token0.decimals)});0==this.chainId?a.then(async t=>{this.transactionState="in",this.transactionState=await this.$loading(t)?"done":"none"}):a.on("transactionHash",t=>{this.transactionState="in"}).on("receipt",t=>{this.transactionState="done";for(const e of Object.values(t.events)){if(e.address.toLowerCase()!==this.$contracts.AirDrop.options.address.toLowerCase())continue;const t=e.raw.data.decode([{name:"user",type:"address"},{name:"dropAmount",type:"uint256"},{name:"time",type:"uint256"}]);this.airdropNum=t.dropAmount.fromWei(),this.showAirDrop=!0;break}}).on("error",t=>{n["a"].fail(this.$t("Transactioni.text2")),this.transactionState="none"})},swapExactTokensForETH(){if(this.lastEnter!==this.amount0)return;const t=Math.floor((new Date).getTime()/1e3)+this.deadline,e=this.amount1.toWei(this.token1.decimals).toBN(),s=e.minus(e.div(100).times(this.slippage)).toFixed(0);this.amountOutMin=s.fromWei(this.token1.decimals).toFixed();const a=(this.$Aggregation?this.$Aggregation.methods.swapExactTokensForETH(this.amount0.toWei(this.token0.decimals),s,this.routerInfo.tokensPath.map(t=>t.address),this.routerInfo.factorysPath,this.$address,t):(0==this.chainId?this.$Router:this.$Router.methods).swapExactTokensForETH(this.amount0.toWei(this.token0.decimals),s,this.routerInfo.map(t=>t.address),this.$address,t)).send({from:this.$address});0==this.chainId?a.then(async t=>{this.transactionState="in",this.transactionState=await this.$loading(t)?"done":"none"}):a.on("transactionHash",t=>{this.transactionState="in"}).on("receipt",t=>{this.transactionState="done"}).on("error",t=>{n["a"].fail(this.$t("Transactioni.text2")),this.transactionState="none"})},swapExactTokensForTokens(){if(this.lastEnter!==this.amount0)return;const t=Math.floor((new Date).getTime()/1e3)+this.deadline,e=this.amount1.toWei(this.token1.decimals).toBN(),s=e.minus(e.div(100).times(this.slippage)).toFixed(0);this.amountOutMin=s.fromWei(this.token1.decimals).toFixed();const a=(this.$Aggregation?this.$Aggregation.methods.swapExactTokensForTokens(this.amount0.toWei(this.token0.decimals),s,this.routerInfo.tokensPath.map(t=>t.address),this.routerInfo.factorysPath,this.$address,t):(0==this.chainId?this.$Router:this.$Router.methods).swapExactTokensForTokens(this.amount0.toWei(this.token0.decimals),s,this.routerInfo.map(t=>t.address),this.$address,t)).send({from:this.$address});0==this.chainId?a.then(async t=>{this.transactionState="in",this.transactionState=await this.$loading(t)?"done":"none"}):a.on("transactionHash",t=>{this.transactionState="in"}).on("receipt",t=>{this.transactionState="done";for(const e of Object.values(t.events)){if(e.address.toLowerCase()!==this.$contracts.AirDrop.options.address.toLowerCase())continue;const t=e.raw.data.decode([{name:"user",type:"address"},{name:"dropAmount",type:"uint256"},{name:"time",type:"uint256"}]);this.airdropNum=t.dropAmount.fromWei(),this.showAirDrop=!0;break}}).on("error",t=>{n["a"].fail(this.$t("Transactioni.text2")),this.transactionState="none"})},select({token:t,who:e}){const s="token0"===e?this.token1:this.token0;if(s.symbol===t.symbol)return this.switchToken();this[e]=t;const a=c["a"][this.chainId].mainCoin;if(this.token0.symbol===a.symbol)if(0==this.chainId){const t=[[this.$Multicall.address.toHex(),"getEthBalance(address)".encodeFunction(["address"],[this.$address])],[this.token1.address.toHex(),"balanceOf(address)".encodeFunction(["address"],[this.$address])]];window.tronWeb.transactionBuilder.triggerConstantContract(this.$Multicall.address,"aggregate((address,bytes)[])",{},[{type:"(address,bytes)[]",value:t}],this.$address).then(t=>{const{returnData:e}=t.constant_result[0].decode([{name:"blockNumber",type:"uint256"},{name:"returnData",type:"bytes[]"}]);this.balance=e[0].fromWei(6),this.balance1=e[1].fromWei(this.token1.decimals)})}else{const t=new this.$web3.BatchRequest,e=new this.$web3.eth.Contract(l,this.token1.address);t.add(this.$web3.eth.getBalance.request(this.$address,"latest")),t.add(e.methods.balanceOf(this.$address).call.request({from:this.$address})),t.requestManager.sendBatch(t.requests,(t,e)=>{t||(this.balance=("string"===typeof e[0]?e[0]:e[0].result).fromWei(),this.balance1=e[1].result.fromWei(this.token1.decimals))})}else if(0==this.chainId){const t="balanceOf(address)".encodeFunction(["address"],[this.$address]),e="getEthBalance(address)".encodeFunction(["address"],[this.$address]),s="allowance(address,address)".encodeFunction(["address","address"],[this.$address,this.$Router.address]),i=[[this.token0.address.toHex(),t],[this.token0.address.toHex(),s]];this.token1.symbol===a.symbol?i.push([this.$Multicall.address.toHex(),e]):i.push([this.token1.address.toHex(),t]),window.tronWeb.transactionBuilder.triggerConstantContract(this.$Multicall.address,"aggregate((address,bytes)[])",{},[{type:"(address,bytes)[]",value:i}],this.$address).then(t=>{const{returnData:e}=t.constant_result[0].decode([{name:"blockNumber",type:"uint256"},{name:"returnData",type:"bytes[]"}]);this.balance=e[0].fromWei(this.token0.decimals),this.allowance=e[1].fromWei(this.token0.decimals),this.balance1=e[2].fromWei(this.token1.decimals)})}else{const t=new this.$web3.BatchRequest,e=new this.$web3.eth.Contract(l,this.token0.address),s=new this.$web3.eth.Contract(l,this.token1.address);t.add(e.methods.balanceOf(this.$address).call.request({from:this.$address})),t.add(e.methods.allowance(this.$address,(this.$Aggregation||this.$Router).options.address).call.request({from:this.$address})),this.token1.symbol===a.symbol?t.add(this.$web3.eth.getBalance.request(this.$address,"latest")):t.add(s.methods.balanceOf(this.$address).call.request({from:this.$address})),t.requestManager.sendBatch(t.requests,(t,e)=>{t||(this.balance=("string"===typeof e[0]?e[0]:e[0].result).fromWei(this.token0.decimals),this.allowance=e[1].result.fromWei(this.token0.decimals),this.balance1=e[2].result.fromWei(this.token1.decimals))})}this.amount0.toBN().gt(0)&&this.input(),this.reloadSlippage()},searchRouter(t){return new Promise(async e=>{const s=Object(h["k"])(this.token0,this.token1,c["e"][this.chainId],this.factorys),a=[],i=(this.amount0.toBN().gt(0)?this.amount0:1).toWei(this.token0.decimals);let n="0".toBN(),o=-1;if(0==this.chainId){for(let t=0;t<s.length;t++)a.push([this.$Router.address.toHex(),"getAmountsOut(uint256,address[])".encodeFunction(["uint256","address[]"],[i,s[t].map(t=>t.address.toHex())])]);window.tronWeb.transactionBuilder.triggerConstantContract(this.$Multicall.address,"tryAggregate(bool,(address,bytes)[])",{},[{type:"bool",value:!1},{type:"(address,bytes)[]",value:a}],this.$address).then(a=>{const i=a.constant_result[0].decode([{type:"tuple[]",components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}]}]);for(let t=0;t<i.length;t++){if(!i[t].success)continue;const e=i[t].returnData.decode(["uint256[]"]);n.lt(e[e.length-1])&&(n=e[e.length-1].toBN(),o=t)}if(-1!==o){if(!t){this.amount1=n.toFixed().fromWei(this.token1.decimals),this.getAmountsOut(1,s[o]).then(t=>{this.rate1=t});const t=[...s[o]];this.getAmountsOut(1,t.reverse()).then(t=>{this.rate0=t})}e(s[o])}else this.amount1="",e([])})}else if(this.$Aggregation){const a=await this.getReserves();for(let t=0;t<s.length;t++){const e=Object(h["d"])(i,s[t].tokensPath,s[t].factorysPath,a);n.lt(e[e.length-1])&&(n=e[e.length-1].toBN(),o=t)}if(-1!==o){if(!t){this.amount1=n.toFixed().fromWei(this.token1.decimals),this.getAmountsOut(1,s[o]).then(t=>{this.rate1=t});const t={tokensPath:[...s[o].tokensPath],factorysPath:[...s[o].factorysPath]},e=t.factorysPath.reverse();let a=e.pop();e.unshift(a),this.getAmountsOut(1,{tokensPath:t.tokensPath.reverse(),factorysPath:e}).then(t=>{this.rate0=t})}e(s[o])}else this.amount1="",e(null)}else{for(let t=0;t<s.length;t++){const e=this.$Router.methods.getAmountsOut(i,s[t].map(t=>t.address));a.push([this.$Router.options.address,e.encodeABI()])}this.$Multicall.methods.tryAggregate(!1,a).call({from:this.$address},(a,i)=>{if(!a){let a="0".toBN(),n=-1;for(let t=0;t<i.length;t++){if(!i[t].success)continue;const e=i[t].returnData.decode(["uint256[]"]);a.lt(e[e.length-1])&&(a=e[e.length-1].toBN(),n=t)}if(-1!==n){if(!t){this.amount1=a.toFixed().fromWei(this.token1.decimals),this.getAmountsOut(1,s[n]).then(t=>{this.rate1=t});const t=[...s[n]];this.getAmountsOut(1,t.reverse()).then(t=>{this.rate0=t})}e(s[n])}else this.amount1="",e(null)}})}})},async getTransactions(){const t=(await Object(h["m"])(Object(c["f"])(this.chainId,this.$address),this.chainId)).slice(0,1);if(t.length>0){const e=0==this.chainId?"0x"+t[0].trigger_info.data:t[0].input,s=0==this.chainId?t[0].timestamp:1e3*t[0].timeStamp;let a;a=["0x7ff36ab5","0xb6f9de95"].includes(e.slice(0,10))?{...e.slice(10).decode([{type:"uint",name:"amountOutMin"},{type:"address[]",name:"path"}]),amountIn:t[0][0==this.chainId?"amount":"value"],date:this.formatDate(s)}:{...e.slice(10).decode([{type:"uint",name:"amountIn"},{type:"uint",name:"amountOutMin"},{type:"address[]",name:"path"}]),date:this.formatDate(s)};const i=[],n=c["a"][this.chainId].mainCoin;if(0==this.chainId)a.path.forEach(t=>{i.push([t,"symbol()".encodeFunction()]),i.push([t,"decimals()".encodeFunction()])}),window.tronWeb.transactionBuilder.triggerConstantContract(this.$Multicall.address,"aggregate((address,bytes)[])",{},[{type:"(address,bytes)[]",value:i}],this.$address).then(e=>{const{returnData:s}=e.constant_result[0].decode([{name:"blockNumber",type:"uint256"},{name:"returnData",type:"bytes[]"}]),o=[],r=s[1].decode(["uint8"]),c=s[i.length-1].decode(["uint8"]);for(let t=0;t<s.length;t+=2){const e=s[t].decode(["string"]);o.push(e==="W"+n.symbol?n.symbol:e)}this.latestSwap={router:o,hash:Object(h["l"])(this.chainId,t[0].hash),amount0:a.amountIn.fromWei(r),amount1:a.amountOutMin.fromWei(c),date:a.date}});else{const e=new this.$web3.BatchRequest;a.path.forEach(t=>{const s=new this.$web3.eth.Contract(l,t);e.add(s.methods.symbol().call.request({from:this.$address})),e.add(s.methods.decimals().call.request({from:this.$address}))}),e.requestManager.sendBatch(e.requests,(e,s)=>{if(!e){const e=("string"===typeof s[0]?s[0]:s[0].result).decode(["string"]),i=[e==="W"+n.symbol?n.symbol:e],o=s[1].result.decode(["uint8"]),r=s[s.length-1].result.decode(["uint8"]);for(let t=2;t<s.length;t+=2){const e=s[t].result.decode(["string"]);i.push(e==="W"+n.symbol?n.symbol:e)}this.latestSwap={router:i,hash:Object(h["l"])(this.chainId,t[0].hash),amount0:a.amountIn.fromWei(o),amount1:a.amountOutMin.fromWei(r),date:a.date}}})}}},formatDate(t){function e(t){return t<10?"0"+t:t}let s=new Date(t),a=s.getFullYear(),i=e(s.getMonth()+1),n=e(s.getDate()),o=e(s.getHours()),r=e(s.getMinutes());return`${a}/${i}/${n} ${o}:${r}`}}},m=u,p=m,g=(s("2430"),s("1487"),s("b01b")),f=Object(g["a"])(p,a,i,!1,null,"ed2f332a",null);e["default"]=f.exports},"7dd5":function(t,e,s){t.exports=s.p+"img/change-btn.4f8b8895.svg"},"98bc":function(t,e,s){t.exports=s.p+"img/transaction-empty.d9bd8235.svg"},b500:function(t,e,s){"use strict";s("1651"),s("4c4a")},c55c:function(t,e,s){"use strict";var a=s("f9e1"),i=s("c84c"),n=s("8223");function o(t){if(!Object(n["c"])(t))return t;if(Array.isArray(t))return t.map((function(t){return o(t)}));if("object"===typeof t){var e={};return Object.keys(t).forEach((function(s){e[s]=o(t[s])})),e}return t}var r=s("2090"),h=s("fd01"),c=s("687c"),d={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}},l=Object(a["a"])("slider"),u=l[0],m=l[1],p=function(t,e){return JSON.stringify(t)===JSON.stringify(e)};e["a"]=u({mixins:[c["a"],d],props:{disabled:Boolean,vertical:Boolean,range:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},value:{type:[Number,Array],default:0}},data:function(){return{dragStatus:""}},computed:{scope:function(){return this.max-this.min},buttonStyle:function(){if(this.buttonSize){var t=Object(i["a"])(this.buttonSize);return{width:t,height:t}}}},created:function(){this.updateValue(this.value)},mounted:function(){this.range?(this.bindTouchEvent(this.$refs.wrapper0),this.bindTouchEvent(this.$refs.wrapper1)):this.bindTouchEvent(this.$refs.wrapper)},methods:{onTouchStart:function(t){this.disabled||(this.touchStart(t),this.currentValue=this.value,this.range?this.startValue=this.value.map(this.format):this.startValue=this.format(this.value),this.dragStatus="start")},onTouchMove:function(t){if(!this.disabled){"start"===this.dragStatus&&this.$emit("drag-start"),Object(r["c"])(t,!0),this.touchMove(t),this.dragStatus="draging";var e=this.$el.getBoundingClientRect(),s=this.vertical?this.deltaY:this.deltaX,a=this.vertical?e.height:e.width,i=s/a*this.scope;this.range?this.currentValue[this.index]=this.startValue[this.index]+i:this.currentValue=this.startValue+i,this.updateValue(this.currentValue)}},onTouchEnd:function(){this.disabled||("draging"===this.dragStatus&&(this.updateValue(this.currentValue,!0),this.$emit("drag-end")),this.dragStatus="")},onClick:function(t){if(t.stopPropagation(),!this.disabled){var e=this.$el.getBoundingClientRect(),s=this.vertical?t.clientY-e.top:t.clientX-e.left,a=this.vertical?e.height:e.width,i=+this.min+s/a*this.scope;if(this.range){var n=this.value,o=n[0],r=n[1],h=(o+r)/2;i<=h?o=i:r=i,i=[o,r]}this.startValue=this.value,this.updateValue(i,!0)}},handleOverlap:function(t){return t[0]>t[1]?(t=o(t),t.reverse()):t},updateValue:function(t,e){t=this.range?this.handleOverlap(t).map(this.format):this.format(t),p(t,this.value)||this.$emit("input",t),e&&!p(t,this.startValue)&&this.$emit("change",t)},format:function(t){var e=+this.min,s=+this.max,a=+this.step;t=Object(h["c"])(t,e,s);var i=Math.round((t-e)/a)*a;return Object(h["a"])(e,i)}},render:function(){var t,e,s=this,a=arguments[0],n=this.vertical,o=n?"height":"width",r=n?"width":"height",h=(t={background:this.inactiveColor},t[r]=Object(i["a"])(this.barHeight),t),c=function(){var t=s.value,e=s.min,a=s.range,i=s.scope;return a?100*(t[1]-t[0])/i+"%":100*(t-e)/i+"%"},d=function(){var t=s.value,e=s.min,a=s.range,i=s.scope;return a?100*(t[0]-e)/i+"%":null},l=(e={},e[o]=c(),e.left=this.vertical?null:d(),e.top=this.vertical?d():null,e.background=this.activeColor,e);this.dragStatus&&(l.transition="none");var u=function(t){var e=["left","right"],i="number"===typeof t,n=i?s.value[t]:s.value,o=function(){return i?"button-wrapper-"+e[t]:"button-wrapper"},r=function(){return i?"wrapper"+t:"wrapper"},h=function(){if(i){var e=s.slots(0===t?"left-button":"right-button",{value:n});if(e)return e}return s.slots("button")?s.slots("button"):a("div",{class:m("button"),style:s.buttonStyle})};return a("div",{ref:r(),attrs:{role:"slider",tabindex:s.disabled?-1:0,"aria-valuemin":s.min,"aria-valuenow":s.value,"aria-valuemax":s.max,"aria-orientation":s.vertical?"vertical":"horizontal"},class:m(o()),on:{touchstart:function(){i&&(s.index=t)},click:function(t){return t.stopPropagation()}}},[h()])};return a("div",{style:h,class:m({disabled:this.disabled,vertical:n}),on:{click:this.onClick}},[a("div",{class:m("bar"),style:l},[this.range?[u(0),u(1)]:u()])])}})},e4b1:function(t,e,s){t.exports=s.p+"img/select-btn.06f167f5.svg"},fd01:function(t,e,s){"use strict";function a(t,e,s){return Math.min(Math.max(t,e),s)}function i(t,e,s){var a=t.indexOf(e),i="";return-1===a?t:"-"===e&&0!==a?t.slice(0,a):("."===e&&t.match(/^(\.|-\.)/)&&(i=a?"-0":"0"),i+t.slice(0,a+1)+t.slice(a).replace(s,""))}function n(t,e,s){void 0===e&&(e=!0),void 0===s&&(s=!0),t=e?i(t,".",/\./g):t.split(".")[0],t=s?i(t,"-",/-/g):t.replace(/-/,"");var a=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(a,"")}function o(t,e){var s=Math.pow(10,10);return Math.round((t+e)*s)/s}s.d(e,"c",(function(){return a})),s.d(e,"b",(function(){return n})),s.d(e,"a",(function(){return o}))}}]);