(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25356740"],{"0038":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-overlay",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],on:{click:t.toggle}},[a("div",{class:"fsv-pledge "+t.theme,on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"header"},[a("span",[t._v(t._s(t.$t("fsvPledge.text1")))]),a("a-icon",{attrs:{type:"close"},on:{click:t.toggle}})],1),a("span",[t._v(t._s(t.$t("fsvPledge.text2")))]),a("div",{staticClass:"amount"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:t.$t("fsvPledge.text3")},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("span",[t._v("FSV-AC/LP")]),a("van-button",{on:{click:function(e){t.amount=t.balance}}},[t._v(t._s(t.$t("fsvPledge.text4")))])],1),a("span",[t._v(t._s(t.$t("fsvPledge.text5"))+" "),a("span",[t._v(t._s(t.balance.toFixed(4)))]),t._v(" FSV-AC/LP")]),a("router-link",{attrs:{to:""}},[t._v(t._s(t.$t("fsvPledge.text6")))]),a("van-button",{attrs:{loading:t.trading,disabled:t.trading||Number(t.amount)<=0},on:{click:t.deposit}},[t._v(t._s(t.btnText))])],1)])},n=[],o=a("1da1"),i=a("3835"),r=a("5530"),c=(a("96cf"),a("a9e3"),a("b680"),{data:function(){return{show:!1,amount:"",balance:"0",allowance:"0",trading:!1}},computed:Object(r["a"])(Object(r["a"])({},Vuex.mapState(["theme"])),{},{btnText:function(){return this.trading?this.$t("fsvPledge.text7"):Number(this.amount)<=0?this.$t("fsvPledge.text3"):this.amount.toBN().gt(this.allowance)?this.$t("fsvPledge.text8"):this.$t("fsvPledge.text9")}}),created:function(){this.$contracts&&this.init()},methods:{toggle:function(){this.show=!this.show},init:function(){var t=this;this.$contracts.Multicall.methods.aggregate([[this.$contracts.FSV_AC_LP.options.address,this.$contracts.FSV_AC_LP.methods.balanceOf(this.$address).encodeABI()],[this.$contracts.FSV_AC_LP.options.address,this.$contracts.FSV_AC_LP.methods.allowance(this.$address,this.$contracts.DaoFarm.options.address).encodeABI()]]).call({from:this.$address},(function(e,a){if(!e){var s=Object(i["a"])(a.returnData,2),n=s[0],o=s[1];t.balance=n.fromWei(),t.allowance=o.fromWei()}}))},approve:function(){var t=this;this.$contracts.FSV_AC_LP.methods.approve(this.$contracts.DaoFarm.options.address,this.amount.toBN().times(10).toFixed().toWei()).send({from:this.$address}).on("transactionHash",(function(e){t.trading=!0})).on("receipt",function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$contracts.FSV_AC_LP.methods.allowance(t.$address,t.$contracts.DaoFarm.options.address).call({from:t.$address});case 2:s=e.sent,t.allowance=s.fromWei(),vant.Toast.success(t.$t("fsvPledge.text10")),t.trading=!1;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){t.trading=!1}))},deposit:function(){var t=this;if(this.amount.toBN().gt(this.balance))vant.Toast.fail(this.$t("lpRedeem.text8"));else{if(this.amount.toBN().gt(this.allowance))return this.approve();var e=this.$contracts.DaoFarm.methods.deposit(this.amount.toWei(),this.$address);e.call({from:this.$address},(function(a,s){a||e.send({from:t.$address}).on("transactionHash",(function(e){t.trading=!0})).on("receipt",(function(e){vant.Toast.success(t.$t("fsvPledge.text11")),t.$emit("reload"),t.init(),t.amount="",t.trading=!1})).on("error",(function(e){t.trading=!1}))}))}}}}),d=c,l=d,u=(a("adc9"),a("2877")),h=Object(u["a"])(l,s,n,!1,null,"ca5cea86",null);e["default"]=h.exports},8195:function(t,e,a){},adc9:function(t,e,a){"use strict";a("8195")}}]);