(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e3b1721"],{"070c":function(t,i,s){"use strict";s.r(i);var a=function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"dao"},[i("h2",[t._v(t._s(t.$t("dao_tips.tip1")))]),i("p",[t._v(t._s(t.$t("dao_tips.tip2")))]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isBinded,expression:"!isBinded"}],staticClass:"bind-container"},[i("div",{staticClass:"bind-content"},[i("h3",[t._v(t._s(t.$t("dao_governance_invitation")))]),i("p",[t._v(t._s(t.$t("dao_tips.tip3")))]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{placeholder:t.$t("enter_invitation_address")},domProps:{value:t.inputValue},on:{input:function(i){i.target.composing||(t.inputValue=i.target.value)}}}),t._v(" "),i("van-button",{attrs:{disabled:t.trading,loading:t.trading,"loading-text":"绑定中..."},on:{click:t.makeRelationDelegate}},[t._v(t._s(t.$t("confirm")))])],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isBinded,expression:"isBinded"}],staticClass:"binded-container"},[i("div",{staticClass:"info-container"},[i("div",{staticClass:"info-content"},[i("h3",[t._v(t._s(t.$t("dao_governance_invitation")))]),i("p",[t._v(t._s(t.$t("dao_tips.tip4")))]),i("div",{staticClass:"details"},[i("div",[i("span",[t._v(t._s(t.$t("featured_link")))]),i("div",[i("span",[t._v(t._s(t.inviteLink))]),i("img",{attrs:{src:s("54ee")}})])]),i("div",[i("span",[t._v(t._s(t.$t("invitation_address")))]),i("div",[i("span",[t._v(t._s(t.parentAddress))]),i("img",{attrs:{src:s("54ee")}})])])])])]),i("div",{staticClass:"total-award"},[i("div",[i("img",{attrs:{src:s("b9a1")}}),i("div",[i("span",[t._v(t._s(t.$t("cumulative_reward_nft")))]),i("span",[t._v(t._s(t.totalAward))])])]),i("img",{attrs:{src:s("db3a")}})]),i("div",{staticClass:"children"},[i("div",{staticClass:"total"},[i("img",{attrs:{src:s("fd74")}}),i("span",[t._v(t._s(t.$t("bound_address")))]),i("span",[t._v(t._s(t.childrenLength))])]),i("div",{staticClass:"list"},[i("div",{staticClass:"title"},[i("span",[t._v(t._s(t.$t("address")))]),i("span",[t._v(t._s(t.$t("state")))])]),i("div",{staticClass:"content"},t._l(t.children,(function(s){return i("div",{key:s.address},[i("span",[t._v(t._s("0x..."+s.address.slice(-4)))]),i("span",[t._v(t._s(s.state?t.$t("valid"):t.$t("invalid")))])])})),0)])])])])},e=[],n=(s("f8b6"),s("36ad")),d={data(){return{isBinded:!1,trading:!1,inputValue:"",inviteLink:"",parentAddress:"",totalAward:0,childrenLength:0,children:[]}},computed:{btnText(){return this.trading?this.$t("binding"):this.$t("confirm")}},created(){this.$contracts&&this.init()},methods:{async makeRelationDelegate(){if(this.trading=!0,!this.$web3.utils.isAddress(this.inputValue))return this.trading=!1,n["a"].fail(this.$t("dao_tips.tip5"));if(!this.inputValue.toBN().eq(this.$rootAddress.toBN())){const t=await this.$contracts.Family.methods.parentOf(this.inputValue).call();if(t.toBN().lte(0))return this.trading=!1,n["a"].fail(this.$t("dao_tips.tip6"))}const t=this.$contracts.Family.methods.makeRelationDelegate(this.inputValue);try{await t.call({from:this.$address}),t.send({from:this.$address}).on("receipt",()=>{this.init(),this.trading=!1}).on("error",t=>{console.log(t),this.trading=!1})}catch(i){console.log(i),this.trading=!1}},init(){this.inviteLink=location.origin+"?invite="+this.$address,this.$isRoot?this.isBinded=!0:this.$contracts.Family.methods.parentOf(this.$address).call((t,i)=>{t||(this.isBinded=i.toBN().gt(0),this.parentAddress=i)}),this.$contracts.AcDAO.methods.balanceOf(this.$address).call((t,i)=>{t||(this.totalAward=i)}),this.$contracts.Family.methods.childrenLengthOf(this.$address).call((t,i)=>{t||(this.childrenLength=i)}),this.$contracts.Family.methods.childrenOf(this.$address).call((t,i)=>{if(!t){const t=i;this.children=t.map(t=>({address:t,state:!0}))}})}}},r=d,o=r,c=(s("ab1a"),s("b01b")),l=Object(c["a"])(o,a,e,!1,null,"280b4f1b",null);i["default"]=l.exports},3609:function(t,i,s){},"54ee":function(t,i,s){t.exports=s.p+"img/copy.c8f782ac.svg"},ab1a:function(t,i,s){"use strict";s("3609")},b9a1:function(t,i,s){t.exports=s.p+"img/nft.eee36d76.png"},db3a:function(t,i,s){t.exports=s.p+"img/arrow-right.29b8bd3c.svg"},fd74:function(t,i,s){t.exports=s.p+"img/total-children.29101059.svg"}}]);