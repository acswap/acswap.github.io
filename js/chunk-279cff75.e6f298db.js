(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-279cff75"],{"3df4":function(t,e,s){},"47b7":function(t,e,s){t.exports=s.p+"img/prev-light.9d0aa1e9.svg"},4808:function(t,e,s){t.exports=s.p+"img/next-dark.964e38d8.svg"},"4b5c":function(t,e,s){"use strict";s("3df4")},"4fca":function(t,e,s){var n={"./prev-dark.svg":"6949","./prev-light.svg":"47b7"};function a(t){var e=r(t);return s(e)}function r(t){if(!s.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=r,t.exports=a,a.id="4fca"},"5c58":function(t,e,s){t.exports=s.p+"img/next-light.f8ac4fa4.svg"},"62f7":function(t,e,s){var n={"./next-dark.svg":"4808","./next-light.svg":"5c58"};function a(t){var e=r(t);return s(e)}function r(t){if(!s.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=r,t.exports=a,a.id="62f7"},6949:function(t,e,s){t.exports=s.p+"img/prev-dark.df93237a.svg"},b11a:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"log"},[e("div",{staticClass:"taked"},[e("span",[t._v(t._s(t.taked.toFixed(2)))]),e("span",[t._v(t._s(t.$t("total_mining"))+"/AC")])]),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("log.text3")))]),e("span",[t._v(t._s(t.$t("log.text4")))])]),e("div",{staticClass:"list"},[e("div",{staticClass:"header"},[e("span",[t._v(t._s(t.$t("log.text5")))]),e("span",[t._v(t._s(t.$t("log.text6")))]),e("span",[t._v(t._s(t.$t("log.text7")))])]),t._l(t.list[t.currentPage],(function(s,n){return e("div",{key:n},[e("span",[t._v(t._s(s.type))]),e("span",[t._v(t._s(s.amount.toFixed()))]),e("span",[t._v(t._s(s.time))])])}))],2),e("div",{staticClass:"pager"},[e("img",{class:{disabled:0===t.currentPage},attrs:{src:s("4fca")(`./prev-${0===t.currentPage?"dark":"light"}.svg`)},on:{click:t.prevPage}}),e("span",[t._v(t._s(t.currentPage+1)+"/"+t._s(t.list.length))]),e("img",{class:{disabled:t.currentPage===t.list.length-1},attrs:{src:s("62f7")(`./next-${t.currentPage===t.list.length-1?"dark":"light"}.svg`)},on:{click:t.nextPage}})])])])},a=[],r=(s("d999"),s("a215"),s("0c68"),s("815a"),s("ae55"),{data(){return{taked:0,list:[],currentPage:0}},created(){this.$contracts&&this.init()},methods:{init(){this.$contracts.Farm.methods.poolLength().call((t,e)=>{const s=new this.$web3.BatchRequest;for(let n=0;n<+e;n++)s.add(this.$contracts.Farm.methods.pools(n).call.request("latest"));s.requestManager.sendBatch(s.requests,(t,e)=>{t||this.getTaked(e.map(t=>(t.result||t).decode(["address"])))})}),this.$web3.eth.getBlockNumber().then(async t=>{const e=t-5e3>=0?t-5e3:0,s=await this.getLogs(e,t,0);let n=0;this.list=s.reverse().reduce((t,e,s)=>((s+1)%10===0&&(n++,t[n]=[]),t[n].push(e),t),[[]])})},getTaked(t){const e=new this.$web3.BatchRequest;for(let s=0;s<t.length;s++)e.add(this.$contracts.Farm.methods.userInfo(t[s],this.$address).call.request("latest"));e.requestManager.sendBatch(e.requests,(t,e)=>{if(!t){let t="0".toBN();for(let s=0;s<e.length;s++){const n=(e[s].result||e[s]).decode([{type:"uint256",name:"power"},{type:"uint256",name:"reward"},{type:"uint256",name:"taked"},{type:"uint256",name:"rewardDebt"}]);t=t.plus(n.taked.fromWei())}this.taked=t.toFixed()}})},getLogs(t,e,s){return new Promise(n=>{this.$contracts.Farm.getPastEvents("TakeReward",{filter:{user:this.$address},fromBlock:t,toBlock:e}).then(async a=>{const r=Number((await this.$web3.eth.getBlock("latest")).timestamp);let i=a.map(t=>{const e=t.returnValues;let s=this.$t("lp_mining");return e.token.toBN().eq(this.$contracts.AcNFT.options.address.toBN())?s=this.$t("nft_mining"):e.token.toBN().eq(this.$contracts.AcDAO.options.address.toBN())&&(s=this.$t("node_mining")),{type:s,amount:e.reward.fromWei(),time:this.formatTime(r,e.time)}});0===t||3===s?n(i):(e=t,t-=5e3,s++,t<0&&(t=0),n(i.concat(await this.getLogs(t,e,s))))})})},formatTime(t,e){const s=t-Number(e);return s/3600/24>0?`${Math.floor(s/3600/24)}${this.$t("log.text12")}`:s/3600>0?`${Math.floor(s/3600)}${this.$t("log.text13")}`:s/60>0?`${Math.floor(s/60)}${this.$t("log.text14")}`:`${s}${this.$t("log.text15")}`},prevPage(){0!==this.currentPage&&this.currentPage--},nextPage(){this.currentPage+1!==this.list.length&&this.currentPage++}}}),i=r,o=i,c=(s("4b5c"),s("c6fb")),l=Object(c["a"])(o,n,a,!1,null,"47b1cc7f",null);e["default"]=l.exports}}]);