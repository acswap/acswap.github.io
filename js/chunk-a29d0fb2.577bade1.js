(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a29d0fb2"],{"647c":function(t,e,n){},bf27:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-overlay",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],on:{click:t.toggle}},[n("div",{class:"lp-pledge "+t.theme,on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"header"},[n("span",[t._v(t._s(t.$t("lpPledge.text1")))]),n("van-icon",{attrs:{name:"cross"},on:{click:t.toggle}})],1),n("span",[t._v(t._s(t.$t("lpPledge.text2")))]),n("div",{staticClass:"amount"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:t.$t("lpPledge.text3")},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),n("span",[t._v("USDT-AC/LP")]),n("van-button",{on:{click:function(e){t.amount=t.balance}}},[t._v(t._s(t.$t("lpPledge.text4")))])],1),n("span",[t._v(t._s(t.$t("lpPledge.text5"))+" "),n("span",[t._v(t._s(t.balance))]),t._v(" USDT-AC/LP")]),n("router-link",{attrs:{to:""}},[t._v(t._s(t.$t("lpPledge.text6")))]),n("van-button",{attrs:{loading:t.trading,disabled:t.trading||Number(t.amount)<=0},on:{click:t.depositLP}},[t._v(t._s(t.btnText))])],1)])},s=[],o=n("1da1"),r=n("5530"),i=(n("96cf"),n("a9e3"),n("4de4"),n("b680"),n("aca7")),c={data:function(){return{show:!1,amount:"",balance:"0",allowance:"0",trading:!1}},computed:Object(r["a"])(Object(r["a"])({},Vuex.mapState(["contracts","address","theme"])),{},{btnText:function(){return this.trading?this.$t("lpPledge.text7"):Number(this.amount)<=0?this.$t("lpPledge.text3"):this.amount.toBN().gt(this.allowance)?this.$t("lpPledge.text8"):this.$t("lpPledge.text9")},isCheckAll:function(){return 0!==this.list.length&&this.checkedNFTList.length===this.list.length},checkedNFTList:function(){return this.list.filter((function(t){return t.checked}))}}),created:function(){this.$contracts&&this.init()},methods:{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$contracts.USDT_AC_LP.methods.balanceOf(t.$address).call({from:t.$address},(function(e,n){e||(t.balance=n.fromWei())})),t.$contracts.USDT_AC_LP.methods.allowance(t.$address,t.$contracts.Farm.options.address).call({from:t.$address},(function(e,n){e||(t.allowance=n.fromWei())}));case 2:case"end":return e.stop()}}),e)})))()},approve:function(){var t=this;this.$contracts.USDT_AC_LP.methods.approve(this.$contracts.Farm.options.address,this.amount.toBN().times(10).toFixed().toWei()).send({from:this.$address}).on("transactionHash",(function(e){t.trading=!0})).on("receipt",function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$contracts.USDT_AC_LP.methods.allowance(t.$address,t.$contracts.Farm.options.address).call({from:t.$address});case 2:a=e.sent,t.allowance=a.fromWei(),vant.Toast.success("授权成功！"),t.trading=!1;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){t.trading=!1}))},toggle:function(){this.show=!this.show},depositLP:function(){var t=this;if(this.amount.toBN().gt(this.allowance))return this.approve();var e=this.$contracts.Farm.methods.depositLP(i["a"].LP,this.amount.toWei(),this.$address);e.call({from:this.$address},(function(n,a){n||e.send({from:t.$address}).on("transactionHash",(function(e){t.trading=!0})).on("receipt",(function(e){vant.Toast.success("质押成功！"),t.$emit("reload"),t.init(),t.amount="",t.trading=!1})).on("error",(function(e){t.trading=!1}))}))}}},l=c,d=l,u=(n("c5e6"),n("2877")),h=Object(u["a"])(d,a,s,!1,null,"ffdae3fa",null);e["default"]=h.exports},c5e6:function(t,e,n){"use strict";n("647c")}}]);