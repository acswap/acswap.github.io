(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0171e750"],{"070c":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"dao"},[e("h2",[t._v(t._s(t.$t("dao_tips.tip1")))]),e("p",[t._v(t._s(t.$t("dao.text2")))]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isBinded,expression:"!isBinded"}],staticClass:"bind-container"},[e("div",{staticClass:"bind-content"},[e("h3",[t._v(t._s(t.$t("dao_governance_invitation")))]),e("p",[t._v(t._s(t.$t("dao.text3")))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{placeholder:t.$t("dao.text4")},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),t._v(" "),e("van-button",{attrs:{disabled:t.trading,loading:t.trading,"loading-text":t.$t("transacting")},on:{click:t.makeRelationDelegate}},[t._v(t._s(t.$t("confirm")))])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isBinded,expression:"isBinded"}],staticClass:"binded-container"},[e("div",{staticClass:"info-container"},[e("div",{staticClass:"info-content"},[e("h3",[t._v(t._s(t.$t("dao_governance_invitation")))]),e("p",[t._v(t._s(t.$t("dao.text3")))]),e("div",{staticClass:"info"},[t._m(0),e("div",[e("span",{staticClass:"one"},[t._v("Acorn Role NFT")]),e("span",[t._v("ACORN")]),e("div",{staticClass:"one"},[e("span",[t._v("NFT IDï¼š")]),e("span",{staticClass:"onespan"},[t._v(t._s(t.tokenId))]),e("img",{attrs:{src:n("54ee")},on:{click:function(e){return t.copy(t.tokenId)}}})])])])])]),e("div",{staticClass:"children"},[e("div",{staticClass:"total"},[e("img",{attrs:{src:n("fd74")}}),e("span",[t._v(t._s(t.$t("dao.text8")))]),e("span",[t._v(t._s(t.childrenLength))])]),e("div",{staticClass:"list"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("address")))]),e("span",[t._v(t._s(t.$t("NFT")))])]),e("div",{staticClass:"content"},t._l(t.children,(function(n){return e("div",{key:n.address},[e("span",[t._v(t._s("0x..."+n.address.slice(-4)))]),e("span",[t._v(t._s(n.cardId))])])})),0)])])])])},i=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"NFTimg"},[e("img",{attrs:{src:n("ab5f"),alt:""}})])}],a=(n("14b9"),n("d774")),r=(n("d999"),{data(){return{isBinded:!1,trading:!1,inputValue:"",inviteLink:"",parentAddress:"",totalAward:0,childrenLength:0,totalSupply:0,parent:0,tokenId:"",children:[]}},computed:{btnText(){return this.trading?this.$t("binding"):this.$t("confirm")}},created(){this.$contracts&&this.init(),this.$route.query.invite&&(this.inputValue=this.$route.query.invite)},methods:{copy(t){this.$copyText(t).then(()=>{a["a"].success(this.$t("copied"))},()=>{a["a"].fail(this.$t("copy_failed"))})},async makeRelationDelegate(){if(console.log(this.inputValue),0==this.inputValue.length)return a["a"].fail(this.$t("dao.text9"));this.$contracts.RoleToken.methods.ownerOf(this.inputValue).call(async(t,e)=>{if(t)return a["a"].fail(this.$t("dao.text9"));this.trading=!0;const n=this.$contracts.Family.methods.createRole(this.inputValue);try{await n.call({from:this.$address}),n.send({from:this.$address}).on("receipt",()=>{this.init(),this.trading=!1,a["a"].success(this.$t("dao.text10"))}).on("error",t=>{console.log(t),this.trading=!1})}catch(s){console.log(s),this.trading=!1}})},async init(){this.$contracts.RoleToken.methods.balanceOf(this.$address).call(async(t,e)=>{t||(this.isBinded=e.toBN().gt(0),this.parent=e)});const t=await this.$contracts.RoleToken.methods.tokenOfOwnerByIndex(this.$address,this.parent).call(),e=await this.$contracts.RoleToken.methods.totalSupply().call();this.totalSupply=e,this.tokenId=t;const n=await this.$contracts.Family.methods.childrenOf(t).call();for(let s=0;s<n.length;s++)this.$contracts.RoleToken.methods.ownerOf(n[s]).call((t,e)=>{t||this.children.push({cardId:n[s],address:e})});this.childrenLength=n.length}}}),o=r,c=o,d=(n("e042"),n("c6fb")),l=Object(d["a"])(c,s,i,!1,null,"766482e6",null);e["default"]=l.exports},"54ee":function(t,e,n){t.exports=n.p+"img/copy.c8f782ac.svg"},"5b85":function(t,e,n){},ab5f:function(t,e,n){t.exports=n.p+"img/NFT1.6a937691.svg"},cd93:function(t,e,n){"use strict";var s=n("f32c");t.exports=Array.isArray||function(t){return"Array"===s(t)}},cef2:function(t,e,n){"use strict";var s=TypeError,i=9007199254740991;t.exports=function(t){if(t>i)throw s("Maximum allowed index exceeded");return t}},d999:function(t,e,n){"use strict";var s=n("7636"),i=n("43d9"),a=n("805d"),r=n("e440"),o=n("cef2"),c=n("b91a"),d=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=d||!l();s({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=i(this),n=a(e),s=arguments.length;o(n+s);for(var c=0;c<s;c++)e[n]=arguments[c],n++;return r(e,n),n}})},e042:function(t,e,n){"use strict";n("5b85")},e440:function(t,e,n){"use strict";var s=n("ac10"),i=n("cd93"),a=TypeError,r=Object.getOwnPropertyDescriptor,o=s&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(i(t)&&!r(t,"length").writable)throw new a("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},fd74:function(t,e,n){t.exports=n.p+"img/total-children.29101059.svg"}}]);