(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45d349e6"],{"11be":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"popups"},[s("div",{staticClass:"choose-Token"},[s("div",{staticClass:"search"},[s("div",[s("img",{attrs:{src:e("51f2")}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"text",placeholder:t.$t("searchToken.text1")},domProps:{value:t.value},on:{input:[function(s){s.target.composing||(t.value=s.target.value)},t.enterToken]}})]),s("img",{attrs:{src:e("8a9d")},on:{click:function(s){t.show=!1}}})]),s("div",{staticClass:"title"},[t._v(t._s(t.$t("searchToken.text2")))]),s("div",{staticClass:"recommend"},[s("div",{staticClass:"token-container"},t._l(t.hotList,(function(e){return s("div",{key:e.address,on:{click:function(s){return t.select(e)}}},[s("img",{staticClass:"token-logo",attrs:{src:e.logoURI}}),s("span",[t._v(t._s(e.symbol))])])})),0)]),s("div",{staticClass:"title"},[t._v(t._s(t.$t("searchToken.text3")))]),s("div",{staticClass:"all",attrs:{id:"allTokenList"}},[s("div",{staticClass:"token-container"},[t._l(t.allList,(function(e){return s("div",{key:e.address,on:{click:function(s){return t.select(e)}}},[s("div",{staticClass:"forward"},[s("img",{staticClass:"token-logo",attrs:{src:e.logoURI}}),s("span",[t._v(t._s(e.symbol))])]),s("div",{staticClass:"Rear"},[s("span",[t._v(t._s(e.balance))]),s("span",[t._v(t._s(`${e.address.slice(0,5)}...${e.address.slice(-6)}`))])])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading"},[t.loadEnd?[s("span",[t._v(t._s(t.$t("searchToken.text4")))])]:[s("span",[t._v(t._s(t.$t("chooseToken.text1")))]),s("a-icon",{attrs:{type:"loading"}})]],2)],2),s("div",{directives:[{name:"show",rawName:"v-show",value:t.notFound,expression:"notFound"}],staticClass:"not-found"},[s("img",{attrs:{src:e("16d4")}}),s("span",[t._v(t._s(t.$t("searchToken.text5")))])])])])])},i=[],n=(e("38c6"),e("64c8")),o=(e("d999"),e("0c68"),e("abfe"),e("6fad"),e("6eef")),d=e("b9cc");let l={all:[]};const r={0:"tron",1:"eth",56:"bsc",66:"okex",128:"heco",137:"polygon",10001:"ethw",513100:"ethf"};var c={components:{[n["a"].name]:n["a"]},computed:{...Object(o["b"])(["connect","address","chainId"]),tokensURI(){return`https://swap.ac/${r[this.chainId]}_tokens.json`}},data(){return{hotList:[],allList:[],start:0,end:10,loading:!1,loadEnd:!1,value:"",notFound:!1,show:!1,type:0}},created(){fetch(this.tokensURI).then(t=>t.json()).then(t=>{this.hotList=t.hot,l=t,this.connect&&this.init()})},mounted(){const t=document.querySelector("#allTokenList");null===t||void 0===t||t.addEventListener("scroll",async s=>{if(this.loading||this.value.length>0)return!1;if(this.start>=l.all.length)return this.loading=!0,this.loadEnd=!0,!1;const e=t.clientHeight+t.scrollTop;if(e===t.scrollHeight){this.loading=!0;const t=l.all.slice(this.start,this.end);if(0===this.chainId){const s=[];for(let e=0;e<t.length;e++){const a=window.tronWeb.address.toHex(t[e].address).replace("41","0x");s.push([a,"balanceOf(address)".encodeFunction(["address"],[this.address])])}window.tronWeb.transactionBuilder.triggerConstantContract(this.$Multicall.address,"aggregate((address,bytes)[])",{},[{type:"(address,bytes)[]",value:s}],this.address).then(s=>{const{returnData:e}=s.constant_result[0].decode([{name:"blockNumber",type:"uint256"},{name:"returnData",type:"bytes[]"}]);e.forEach((s,e)=>{t[e].balance=s.fromWei(t[e].decimals).toFixed(4)}),this.allList=[...this.allList,...t],this.start=this.end,this.end+=10,this.loading=!1})}else{const s=new this.$web3.BatchRequest;for(let e=0;e<t.length;e++){const a=new this.$web3.eth.Contract(d,t[e].address);s.add(a.methods.balanceOf(this.address).call.request({from:this.address}))}s.requestManager.sendBatch(s.requests,(s,e)=>{s||(e.forEach(({result:s},e)=>{t[e].balance=s.fromWei(t[e].decimals).toFixed(4)}),this.allList=[...this.allList,...t],this.start=this.end,this.end+=10,this.loading=!1)})}}})},methods:{async init(){const t=l.all.slice(this.start,this.end);if(0==this.chainId){const s=[];for(let e=0;e<t.length;e++){const a=window.tronWeb.address.toHex(t[e].address).replace("41","0x");s.push([a,"balanceOf(address)".encodeFunction(["address"],[this.address])])}window.tronWeb.transactionBuilder.triggerConstantContract(this.$Multicall.address,"aggregate((address,bytes)[])",{},[{type:"(address,bytes)[]",value:s}],this.address).then(s=>{const{returnData:e}=s.constant_result[0].decode([{name:"blockNumber",type:"uint256"},{name:"returnData",type:"bytes[]"}]);e.forEach((s,e)=>{t[e].balance=s.fromWei(t[e].decimals).toFixed(4)}),this.allList=t,this.start=this.end,this.end+=10,this.loading=!1})}else{const s=new this.$web3.BatchRequest;for(let e=0;e<t.length;e++){const a=new this.$web3.eth.Contract(d,t[e].address);s.add(a.methods.balanceOf(this.address).call.request({from:this.address}))}s.requestManager.sendBatch(s.requests,(s,e)=>{s||(e.forEach(({result:s},e)=>{t[e].balance=s.fromWei(t[e].decimals).toFixed(4)}),this.allList=t,this.start=this.end,this.end+=10,this.loading=!1)})}},enterToken(){this.allList=[],this.notFound=!1,this.loading=!0,this.loadEnd=!1,this.value.length<=0?(this.start=0,this.end=10,this.init()):(0==this.chainId?window.tronWeb:this.$web3.utils).isAddress(this.value)?this.searchByAddress(this.value):this.searchByName(this.value)},searchByName(t){const s=l.all.filter(s=>s.symbol.includes(t.toUpperCase()));this.notFound=0===s.length,this.allList=s,this.loading=!1},searchByAddress(t){const s=l.all.filter(s=>s.address.toLowerCase()===t.toLowerCase());if(s.length>0)return this.notFound=!1,this.allList=s,void(this.loading=!1);const e=new this.$web3.BatchRequest,a=new this.$web3.eth.Contract(d,t);e.add(a.methods.name().call.request({from:this.address})),e.add(a.methods.symbol().call.request({from:this.address})),e.add(a.methods.decimals().call.request({from:this.address})),e.add(a.methods.balanceOf(this.address).call.request({from:this.address})),e.requestManager.sendBatch(e.requests,(s,e)=>{if(s)this.notFound=!0,this.allList=[];else{const s=("string"===typeof e[0]?e[0]:e[0].result).decode(["string"]),a=e[1].result.decode(["string"]),i=e[2].result.decode(["uint8"]),n=e[3].result.fromWei(i);this.notFound=!1,this.allList=[{name:s,symbol:a,address:t,balance:n,decimals:i,logoURI:"https://acswapinfo.github.io/tokens/bsc/unknown.svg"}]}this.loading=!1})},open(t){this.show=!0,this.type=t},select(t){this.$emit("select",t,this.type),this.show=!1}}},h=c,u=h,m=(e("b74f"),e("c6fb")),f=Object(m["a"])(u,a,i,!1,null,"fca486a4",null);s["default"]=f.exports},b74f:function(t,s,e){"use strict";e("ba9a")},ba9a:function(t,s,e){}}]);