(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d24849f"],{"083f":function(t,e,s){t.exports=s.p+"img/childs.c471e9f5.svg"},4546:function(t,e,s){"use strict";s("6663")},"5bef":function(t,e,s){t.exports=s.p+"img/dao-copy.5a996740.svg"},6663:function(t,e,s){},"991b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"dao-community "+t.theme},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.binded,expression:"!binded"}],staticClass:"bind"},[i("div",{staticClass:"header"},[i("span",[t._v(t._s(t.$t("community.text1")))]),i("span",[t._v(t._s(t.$t("community.text2")))])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.superior,expression:"superior"}],attrs:{type:"text",placeholder:t.$t("community.text17")},domProps:{value:t.superior},on:{input:function(e){e.target.composing||(t.superior=e.target.value)}}}),i("van-button",{attrs:{loading:t.trading,disabled:t.trading},on:{click:t.makeRelation}},[t._v(t._s(t.trading?t.$t("community.text4"):t.$t("community.text5")))])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.binded,expression:"binded"}],staticClass:"info"},[i("div",{staticClass:"header"},[i("span",[t._v(t._s(t.$t("community.text1")))]),i("span",[t._v(t._s(t.$t("community.text2")))])]),i("div",{staticClass:"content"},[i("div",[i("span",[t._v(t._s(t.$t("community.text6")))]),i("div",[i("span",[t._v(t._s(t.inviteLink))]),i("img",{attrs:{src:s("5bef")},on:{click:function(e){return t.copyLink(t.inviteLink)}}})])]),i("div",[i("span",[t._v(t._s(t.$t("community.text7")))]),i("div",[i("span",[t._v(t._s(t.$address))]),i("img",{attrs:{src:s("5bef")},on:{click:function(e){return t.copyAddress(t.address)}}})])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.binded,expression:"binded"}],staticClass:"details"},[i("div",[i("span",[t._v(t._s(t.$t("community.text8")))]),i("span",[t._v(t._s(t.totalDeposit.toFixed(4)))])]),i("div",[i("span",[t._v(t._s(t.$t("community.text9")))]),i("span",[t._v(t._s(t.selfRadio.toFixed(4)))])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.binded,expression:"binded"}],staticClass:"community-list"},[i("div",{staticClass:"header"},[i("img",{attrs:{src:s("083f")}}),i("span",[t._v(t._s(t.$t("community.text10"))+" "),i("span",[t._v(t._s(t.list.length))])])]),i("div",{staticClass:"list"},[i("div",[i("span",[t._v(t._s(t.$t("community.text11")))]),i("span",[t._v(t._s(t.$t("community.text12")))])]),t._l(t.list,(function(e){return i("div",{key:e.address},[i("span",[t._v(t._s(e.address))]),i("span",[t._v(t._s(e.force.toFixed(4)))])])}))],2)])])},n=[],a=s("1da1"),o=s("3835"),r=s("5530"),c=(s("96cf"),s("99af"),s("fb6a"),s("aca7")),d=[{initialValue:0,selfRadio:"70%"},{initialValue:1e3,selfRadio:"80%"},{initialValue:2e3,selfRadio:"90%"}],u={data:function(){return{rootAddress:"",totalDeposit:"0",selfRadio:"70%",superior:"",trading:!1,inviteLink:"",list:[]}},computed:Object(r["a"])({},Vuex.mapState(["theme","binded"])),created:function(){this.$contracts&&this.init(),this.$route.query.invite&&(this.$emit("showBind"),this.superior=this.$route.query.invite)},methods:{init:function(){var t=this;this.inviteLink="".concat(location.href,"?invite=").concat(this.$address),this.$contracts.Multicall.methods.aggregate([[this.$contracts.Family.options.address,this.$contracts.Family.methods.rootAddress().encodeABI()],[this.$contracts.Family.options.address,this.$contracts.Family.methods.parentOf(this.$address).encodeABI()],[this.$contracts.Family.options.address,this.$contracts.Family.methods.childrenOf(this.$address).encodeABI()],[this.$contracts.Govern.options.address,this.$contracts.Govern.methods.userResults(this.$address).encodeABI()]]).call({from:this.$address},(function(e,s){e||function(){var e=Object(o["a"])(s.returnData,4),i=e[0],n=e[1],a=e[2],r=e[3],u=a.decode(["address[]"]);t.rootAddress=i.decode(["address"]).toLowerCase(),t.$store.commit("setBinded",n.toBN().gt(0)),t.totalDeposit=r.fromWei(),t.$address.toLowerCase()===t.rootAddress&&t.$store.commit("setBinded",!0);for(var l=0;l<d.length;l++)t.totalDeposit.toBN().gt(d[l].initialValue)&&(t.selfRadio=d[l].selfRadio);if(u.length>0)for(var m=function(e){console.log(u[e]),t.$contracts.Farm.methods.userPoolInfo(c["a"].FORCE,u[e]).call({from:t.$address},(function(s,i){s||t.list.push({address:"0x...".concat(u[e].slice(-4)),force:i.supply.fromWei()})}))},v=0;v<u.length;v++)m(v)}()}))},makeRelation:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$web3.utils.isAddress(t.superior)){e.next=4;break}return e.abrupt("return",vant.Toast.fail(t.$t("community.text15")));case 4:if(t.superior.toLowerCase()===t.rootAddress){e.next=10;break}return e.next=7,t.$contracts.Family.methods.parentOf(t.superior).call({from:t.$address});case 7:if(s=e.sent,!s.toBN().lte(0)){e.next=10;break}return e.abrupt("return",vant.Toast.fail(t.$t("community.text15")));case 10:i=t.$contracts.Family.methods.makeRelation(t.superior),i.call({from:t.$address},(function(e,s){e||i.send({from:t.$address}).on("transactionHash",(function(e){t.trading=!0})).on("receipt",(function(e){vant.Toast.success(t.$t("community.text16")),t.$emit("reload"),t.init(),t.trading=!1})).on("error",(function(e){t.trading=!1}))}));case 12:case"end":return e.stop()}}),e)})))()},copyLink:function(t){var e=this;this.$copyText(t).then((function(t){vant.Toast.success(e.$t("TokenInfoi.text19"))}),(function(t){vant.Toast.fail(e.$t("TokenInfoi.text20"))}))},copyAddress:function(t){var e=this;this.$copyText(t).then((function(t){vant.Toast.success(e.$t("TokenInfoi.text19"))}),(function(t){vant.Toast.fail(e.$t("TokenInfoi.text20"))}))}}},l=u,m=l,v=(s("4546"),s("2877")),f=Object(v["a"])(m,i,n,!1,null,"689c5429",null);e["default"]=f.exports}}]);