(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76b85947"],{"070c":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"dao"},[e("h2",[t._v(t._s(t.$t("dao_tips.tip1")))]),e("span",[t._v(t._s(t.$t("dao.text2")))]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isBinded,expression:"!isBinded"}],staticClass:"bind-container"},[e("div",{staticClass:"bind-content"},[e("h3",[t._v(t._s(t.$t("dao_governance_invitation")))]),e("p",[t._v(t._s(t.$t("dao.text3")))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{placeholder:t.$t("dao.text4")},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),t._v(" "),e("a-button",{attrs:{disabled:t.trading,loading:t.trading},on:{click:t.makeRelationDelegate}},[t._v(t._s(t.$t("confirm")))])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isBinded,expression:"isBinded"}],staticClass:"binded-container"},[e("div",{staticClass:"info-container"},[e("div",{staticClass:"info-content"},[e("h3",[t._v(t._s(t.$t("dao_governance_invitation")))]),e("p",[t._v(t._s(t.$t("dao.text3")))]),e("div",{staticClass:"info"},[t._m(0),e("div",[e("span",{staticClass:"one"},[t._v("Acorn Role NFT")]),e("span",[t._v("ACORN")]),e("div",{staticClass:"one"},[e("span",[t._v("NFT IDï¼š")]),e("span",{staticClass:"onespan"},[t._v(t._s(t.tokenId))]),e("img",{attrs:{src:s("54ee")}})])])])])]),e("div",{staticClass:"children"},[e("div",{staticClass:"total"},[e("img",{attrs:{src:s("fd74")}}),e("span",[t._v(t._s(t.$t("dao.text8")))]),e("span",[t._v(t._s(t.childrenLength))])]),e("div",{staticClass:"list"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("address")))]),e("span",[t._v("NFT")])]),e("div",{staticClass:"content"},t._l(t.children,(function(s){return e("div",{key:s.address},[e("span",[t._v(t._s("0x..."+s.address.slice(-4)))]),e("span",[t._v(t._s(s.cardId))])])})),0)])])])])},i=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"nftimg"},[e("img",{attrs:{src:s("ab5f"),alt:""}})])}],a=(s("277a"),s("8d0a")),r=(s("d999"),s("6eef")),o={data(){return{isBinded:!1,trading:!1,inputValue:"",inviteLink:"",parentAddress:"",totalAward:0,childrenLength:0,totalSupply:0,parent:0,tokenId:"",children:[]}},computed:{...Object(r["b"])(["connect","address","chainId"]),btnText(){return this.trading?this.$t("binding"):this.$t("confirm")}},created(){this.init()},methods:{copy(t){this.$copyText(t).then(()=>{a["a"].success(this.$t("copied"))},()=>{a["a"].error(this.$t("copy_failed"))})},async makeRelationDelegate(){if(console.log(this.inputValue),0==this.inputValue.length)return a["a"].error(this.$t("dao.text9"));this.$contracts.RoleToken.methods.ownerOf(this.inputValue).call(async(t,e)=>{if(t)return a["a"].error(this.$t("dao.text9"));this.trading=!0;const s={from:this.address};if(0!==this.chainId)try{const[t]=await Promise.all([this.$web3.eth.getGasPrice()]);s.gasPrice=t}catch(i){s.gasPrice=await this.$web3.eth.getGasPrice()}const n=this.$contracts.Family.methods.createRole(this.inputValue);try{await n.call({from:this.address}),n.send(s).on("receipt",()=>{this.init(),this.trading=!1,a["a"].success(this.$t("dao.text10"))}).on("error",t=>{console.log(t),this.trading=!1})}catch(i){console.log(i),this.trading=!1}})},async init(){this.$contracts.RoleToken.methods.balanceOf(this.address).call(async(t,e)=>{t||(this.isBinded=e.toBN().gt(0),this.parent=e)});const t=await this.$contracts.RoleToken.methods.tokenOfOwnerByIndex(this.address,this.parent).call(),e=await this.$contracts.RoleToken.methods.totalSupply().call();this.totalSupply=e,this.tokenId=t;const s=await this.$contracts.Family.methods.childrenOf(t).call();for(let n=0;n<s.length;n++)this.$contracts.RoleToken.methods.ownerOf(s[n]).call((t,e)=>{t||this.children.push({cardId:s[n],address:e})});console.log(s),this.childrenLength=s.length}}},c=o,d=c,l=(s("9774"),s("c6fb")),h=Object(l["a"])(d,n,i,!1,null,"32c71249",null);e["default"]=h.exports},"54ee":function(t,e,s){t.exports=s.p+"img/copy.90cb4f9f.svg"},9774:function(t,e,s){"use strict";s("fd3d")},ab5f:function(t,e,s){t.exports=s.p+"img/NFT1.6a937691.svg"},cd93:function(t,e,s){"use strict";var n=s("f32c");t.exports=Array.isArray||function(t){return"Array"===n(t)}},cef2:function(t,e,s){"use strict";var n=TypeError,i=9007199254740991;t.exports=function(t){if(t>i)throw n("Maximum allowed index exceeded");return t}},d999:function(t,e,s){"use strict";var n=s("7636"),i=s("43d9"),a=s("805d"),r=s("e440"),o=s("cef2"),c=s("b91a"),d=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=d||!l();n({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=i(this),s=a(e),n=arguments.length;o(s+n);for(var c=0;c<n;c++)e[s]=arguments[c],s++;return r(e,s),s}})},e440:function(t,e,s){"use strict";var n=s("ac10"),i=s("cd93"),a=TypeError,r=Object.getOwnPropertyDescriptor,o=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(i(t)&&!r(t,"length").writable)throw new a("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},fd3d:function(t,e,s){},fd74:function(t,e,s){t.exports=s.p+"img/total-children.feb07f8a.svg"}}]);