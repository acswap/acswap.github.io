(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-823961ce"],{"070c":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"dao"},[e("h2",[t._v(t._s(t.$t("dao_tips.tip1")))]),e("p",[t._v(t._s(t.$t("dao.text2")))]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isBinded,expression:"!isBinded"}],staticClass:"bind-container"},[e("div",{staticClass:"bind-content"},[e("h3",[t._v(t._s(t.$t("dao_governance_invitation")))]),e("p",[t._v(t._s(t.$t("dao.text3")))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{placeholder:t.$t("dao.text4")},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),t._v(" "),e("van-button",{attrs:{disabled:t.trading,loading:t.trading,"loading-text":t.$t("transacting")},on:{click:t.makeRelationDelegate}},[t._v(t._s(t.$t("confirm")))])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isBinded,expression:"isBinded"}],staticClass:"binded-container"},[e("div",{staticClass:"info-container"},[e("div",{staticClass:"info-content"},[e("h3",[t._v(t._s(t.$t("dao_governance_invitation")))]),e("p",[t._v(t._s(t.$t("dao.text3")))]),e("div",{staticClass:"info"},[t._m(0),e("div",[e("span",{staticClass:"one"},[t._v("Acorn Role NFT")]),e("span",[t._v("ACORN")]),e("div",{staticClass:"one"},[e("span",[t._v("NFT IDï¼š")]),e("span",{staticClass:"onespan"},[t._v(t._s(t.tokenId))]),e("img",{attrs:{src:s("54ee")},on:{click:function(e){return t.copy(t.tokenId)}}})])])])])]),e("div",{staticClass:"total-award"},[e("div",[e("div",[e("span",[t._v(t._s(t.$t("dao.text5")))]),e("span",[t._v(t._s(t.totalSupply))])]),e("i"),e("div",[e("span",[t._v(t._s(t.$t("dao.text7")))]),e("span",[t._v(t._s(t.childrenLength))])])])]),e("div",{staticClass:"children"},[e("div",{staticClass:"total"},[e("img",{attrs:{src:s("fd74")}}),e("span",[t._v(t._s(t.$t("dao.text8")))]),e("span",[t._v(t._s(t.childrenLength))])]),e("div",{staticClass:"list"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("address")))]),e("span",[t._v(t._s(t.$t("NFT")))])]),e("div",{staticClass:"content"},t._l(t.children,(function(s){return e("div",{key:s.address},[e("span",[t._v(t._s("0x..."+s.address.slice(-4)))]),e("span",[t._v(t._s(s.cardId))])])})),0)])])])])},i=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"NFTimg"},[e("img",{attrs:{src:s("ab5f"),alt:""}})])}],a=(s("14b9"),s("d774")),r=(s("d999"),{data(){return{isBinded:!1,trading:!1,inputValue:"",inviteLink:"",parentAddress:"",totalAward:0,childrenLength:0,totalSupply:0,parent:0,tokenId:"",children:[]}},computed:{btnText(){return this.trading?this.$t("binding"):this.$t("confirm")}},created(){this.$contracts&&this.init(),this.$route.query.invite&&(this.inputValue=this.$route.query.invite)},methods:{copy(t){this.$copyText(t).then(()=>{a["a"].success(this.$t("copied"))},()=>{a["a"].fail(this.$t("copy_failed"))})},async makeRelationDelegate(){if(console.log(this.inputValue),0==this.inputValue.length)return a["a"].fail(this.$t("dao.text9"));this.$contracts.RoleToken.methods.ownerOf(this.inputValue).call(async(t,e)=>{if(t)return a["a"].fail(this.$t("dao.text9"));this.trading=!0;const s=this.$contracts.Family.methods.createRole(this.inputValue);try{await s.call({from:this.$address}),s.send({from:this.$address}).on("receipt",()=>{this.init(),this.trading=!1,a["a"].success(this.$t("dao.text10"))}).on("error",t=>{console.log(t),this.trading=!1})}catch(n){console.log(n),this.trading=!1}})},async init(){this.$contracts.RoleToken.methods.balanceOf(this.$address).call(async(t,e)=>{t||(this.isBinded=e.toBN().gt(0),this.parent=e)});const t=await this.$contracts.RoleToken.methods.tokenOfOwnerByIndex(this.$address,this.parent).call(),e=await this.$contracts.RoleToken.methods.totalSupply().call();this.totalSupply=e,this.tokenId=t;const s=await this.$contracts.Family.methods.childrenOf(t).call();for(let n=0;n<s.length;n++)this.$contracts.RoleToken.methods.ownerOf(s[n]).call((t,e)=>{t||this.children.push({cardId:s[n],address:e})});this.childrenLength=s.length}}}),o=r,c=o,d=(s("906e"),s("c6fb")),l=Object(d["a"])(c,n,i,!1,null,"8597521c",null);e["default"]=l.exports},"54ee":function(t,e,s){t.exports=s.p+"img/copy.c8f782ac.svg"},"5bfa":function(t,e,s){},"906e":function(t,e,s){"use strict";s("5bfa")},ab5f:function(t,e,s){t.exports=s.p+"img/NFT1.6a937691.svg"},cd93:function(t,e,s){"use strict";var n=s("f32c");t.exports=Array.isArray||function(t){return"Array"===n(t)}},cef2:function(t,e,s){"use strict";var n=TypeError,i=9007199254740991;t.exports=function(t){if(t>i)throw n("Maximum allowed index exceeded");return t}},d999:function(t,e,s){"use strict";var n=s("7636"),i=s("43d9"),a=s("805d"),r=s("e440"),o=s("cef2"),c=s("b91a"),d=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=d||!l();n({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=i(this),s=a(e),n=arguments.length;o(s+n);for(var c=0;c<n;c++)e[s]=arguments[c],s++;return r(e,s),s}})},e440:function(t,e,s){"use strict";var n=s("ac10"),i=s("cd93"),a=TypeError,r=Object.getOwnPropertyDescriptor,o=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(i(t)&&!r(t,"length").writable)throw new a("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},fd74:function(t,e,s){t.exports=s.p+"img/total-children.29101059.svg"}}]);